(function () { const e = document.createElement("link").relList; if (e && e.supports && e.supports("modulepreload")) return; for (const s of document.querySelectorAll('link[rel="modulepreload"]')) r(s); new MutationObserver(s => { for (const i of s) if (i.type === "childList") for (const o of i.addedNodes) o.tagName === "LINK" && o.rel === "modulepreload" && r(o) }).observe(document, { childList: !0, subtree: !0 }); function t(s) { const i = {}; return s.integrity && (i.integrity = s.integrity), s.referrerPolicy && (i.referrerPolicy = s.referrerPolicy), s.crossOrigin === "use-credentials" ? i.credentials = "include" : s.crossOrigin === "anonymous" ? i.credentials = "omit" : i.credentials = "same-origin", i } function r(s) { if (s.ep) return; s.ep = !0; const i = t(s); fetch(s.href, i) } })(); const Tr = !1; var $t = Array.isArray, Os = Array.prototype.indexOf, Mn = Array.from, Rn = Object.defineProperty, Ge = Object.getOwnPropertyDescriptor, qr = Object.getOwnPropertyDescriptors, ks = Object.prototype, xs = Array.prototype, Dn = Object.getPrototypeOf, ir = Object.isExtensible; function At(n) { return typeof n == "function" } const wt = () => { }; function Ts(n) { return n() } function Ut(n) { for (var e = 0; e < n.length; e++)n[e]() } function qs() { var n, e, t = new Promise((r, s) => { n = r, e = s }); return { promise: t, resolve: n, reject: e } } const ue = 2, Rr = 4, pn = 8, Wt = 16, je = 32, ht = 64, Pr = 128, me = 256, cn = 512, ee = 1024, ye = 2048, Ne = 4096, Se = 8192, vt = 16384, Bn = 32768, bn = 65536, or = 1 << 17, Rs = 1 << 18, Fn = 1 << 19, $n = 1 << 20, Pn = 1 << 21, Wn = 1 << 22, at = 1 << 23, lt = Symbol("$state"), Ir = Symbol("legacy props"), Ps = Symbol(""), Kn = new class extends Error { name = "StaleReactionError"; message = "The reaction that called `getAbortSignal()` was re-run or destroyed" }; function Is() { throw new Error("https://svelte.dev/e/await_outside_boundary") } function gn(n) { throw new Error("https://svelte.dev/e/lifecycle_outside_component") } function Ls() { throw new Error("https://svelte.dev/e/async_derived_orphan") } function As(n) { throw new Error("https://svelte.dev/e/effect_in_teardown") } function js() { throw new Error("https://svelte.dev/e/effect_in_unowned_derived") } function Ns(n) { throw new Error("https://svelte.dev/e/effect_orphan") } function zs() { throw new Error("https://svelte.dev/e/effect_update_depth_exceeded") } function Us(n) { throw new Error("https://svelte.dev/e/lifecycle_legacy_only") } function Ms(n) { throw new Error("https://svelte.dev/e/props_invalid_value") } function Ds() { throw new Error("https://svelte.dev/e/state_descriptors_fixed") } function Bs() { throw new Error("https://svelte.dev/e/state_prototype_fixed") } function Fs() { throw new Error("https://svelte.dev/e/state_unsafe_mutation") } const $s = 1, Ws = 2, Ks = 16, Hs = 1, Vs = 2, Zs = 4, Gs = 8, Ys = 16, Js = 1, Qs = 2, X = Symbol(), Xs = "http://www.w3.org/1999/xhtml"; let ei = !1; function Lr(n) { return n === this.v } function Ar(n, e) { return n != n ? e == e : n !== e || n !== null && typeof n == "object" || typeof n == "function" } function jr(n) { return !Ar(n, this.v) } let Tt = !1, ti = !1; function ni() { Tt = !0 } let U = null; function un(n) { U = n } function Hn(n, e = !1, t) { U = { p: U, c: null, e: null, s: n, x: null, l: Tt && !e ? { s: null, u: null, $: [] } : null } } function Vn(n) { var e = U, t = e.e; if (t !== null) { e.e = null; for (var r of t) Zr(r) } return U = e.p, {} } function qt() { return !Tt || U !== null && U.l === null } const ri = new WeakMap; function si(n) { var e = I; if (e === null) return L.f |= at, n; if ((e.f & Bn) === 0) { if ((e.f & Pr) === 0) throw !e.parent && n instanceof Error && Nr(n), n; e.b.error(n) } else Zn(n, e) } function Zn(n, e) { for (; e !== null;) { if ((e.f & Pr) !== 0) try { e.b.error(n); return } catch (t) { n = t } e = e.parent } throw n instanceof Error && Nr(n), n } function Nr(n) { const e = ri.get(n); e && (Rn(n, "message", { value: e.message }), Rn(n, "stack", { value: e.stack })) } let Mt = [], In = []; function zr() { var n = Mt; Mt = [], Ut(n) } function ii() { var n = In; In = [], Ut(n) } function oi(n) { Mt.length === 0 && queueMicrotask(zr), Mt.push(n) } function ai() { Mt.length > 0 && zr(), In.length > 0 && ii() } function li() { for (var n = I.b; n !== null && !n.has_pending_snippet();)n = n.parent; return n === null && Is(), n } function Kt(n) { var e = ue | ye, t = L !== null && (L.f & ue) !== 0 ? L : null; return I === null || t !== null && (t.f & me) !== 0 ? e |= me : I.f |= Fn, { ctx: U, deps: null, effects: null, equals: Lr, f: e, fn: n, reactions: null, rv: 0, v: X, wv: 0, parent: t ?? I, ac: null } } function ci(n, e) { let t = I; t === null && Ls(); var r = t.b, s = void 0, i = Dt(X), o = null, a = !L; return Ei(() => { try { var l = n() } catch (p) { l = Promise.reject(p) } var u = () => l; s = o?.then(u, u) ?? Promise.resolve(l), o = s; var v = z, g = r.pending; a && (r.update_pending_count(1), g || v.increment()); const d = (p, h = void 0) => { o = null, g || v.activate(), h ? h !== Kn && (i.f |= at, dn(i, h)) : ((i.f & at) !== 0 && (i.f ^= at), dn(i, p)), a && (r.update_pending_count(-1), g || v.decrement()), Dr() }; if (s.then(d, p => d(null, p || "unknown")), v) return () => { queueMicrotask(() => v.neuter()) } }), new Promise(l => { function u(v) { function g() { v === s ? l(i) : u(s) } v.then(g, g) } u(s) }) } function ui(n) { const e = Kt(n); return es(e), e } function Gn(n) { const e = Kt(n); return e.equals = jr, e } function Ur(n) { var e = n.effects; if (e !== null) { n.effects = null; for (var t = 0; t < e.length; t += 1)Ae(e[t]) } } function fi(n) { for (var e = n.parent; e !== null;) { if ((e.f & ue) === 0) return e; e = e.parent } return null } function Yn(n) { var e, t = I; Ye(fi(n)); try { Ur(n), e = ss(n) } finally { Ye(t) } return e } function Mr(n) { var e = Yn(n); if (n.equals(e) || (n.v = e, n.wv = ns()), !pt) if (Ot !== null) Ot.set(n, n.v); else { var t = (Ze || (n.f & me) !== 0) && n.deps !== null ? Ne : ee; ie(n, t) } } function di(n, e, t) { const r = qt() ? Kt : Gn; if (e.length === 0) { t(n.map(r)); return } var s = z, i = I, o = hi(), a = li(); Promise.all(e.map(l => ci(l))).then(l => { s?.activate(), o(); try { t([...n.map(r), ...l]) } catch (u) { (i.f & vt) === 0 && Zn(u, i) } s?.deactivate(), Dr() }).catch(l => { a.error(l) }) } function hi() { var n = I, e = L, t = U; return function () { Ye(n), Te(e), un(t) } } function Dr() { Ye(null), Te(null), un(null) } const jt = new Set; let z = null, on = null, Ot = null, ar = new Set, fn = []; function Br() { const n = fn.shift(); fn.length > 0 && queueMicrotask(Br), n() } let ft = [], _n = null, Ln = !1, an = !1; class kt { current = new Map; #s = new Map; #i = new Set; #e = 0; #c = null; #u = !1; #n = []; #o = []; #r = []; #t = []; #a = []; #f = []; #d = []; skipped_effects = new Set; process(e) { ft = [], on = null; var t = null; if (jt.size > 1) { t = new Map, Ot = new Map; for (const [i, o] of this.current) t.set(i, { v: i.v, wv: i.wv }), i.v = o; for (const i of jt) if (i !== this) for (const [o, a] of i.#s) t.has(o) || (t.set(o, { v: o.v, wv: o.wv }), o.v = a) } for (const i of e) this.#v(i); if (this.#n.length === 0 && this.#e === 0) { this.#h(); var r = this.#r, s = this.#t; this.#r = [], this.#t = [], this.#a = [], on = z, z = null, lr(r), lr(s), z === null ? z = this : jt.delete(this), this.#c?.resolve() } else this.#l(this.#r), this.#l(this.#t), this.#l(this.#a); if (t) { for (const [i, { v: o, wv: a }] of t) i.wv <= a && (i.v = o); Ot = null } for (const i of this.#n) St(i); for (const i of this.#o) St(i); this.#n = [], this.#o = [] } #v(e) { e.f ^= ee; for (var t = e.first; t !== null;) { var r = t.f, s = (r & (je | ht)) !== 0, i = s && (r & ee) !== 0, o = i || (r & Se) !== 0 || this.skipped_effects.has(t); if (!o && t.fn !== null) { if (s) t.f ^= ee; else if ((r & ee) === 0) if ((r & Rr) !== 0) this.#t.push(t); else if ((r & Wn) !== 0) { var a = t.b?.pending ? this.#o : this.#n; a.push(t) } else Vt(t) && ((t.f & Wt) !== 0 && this.#a.push(t), St(t)); var l = t.first; if (l !== null) { t = l; continue } } var u = t.parent; for (t = t.next; t === null && u !== null;)t = u.next, u = u.parent } } #l(e) { for (const t of e) ((t.f & ye) !== 0 ? this.#f : this.#d).push(t), ie(t, ee); e.length = 0 } capture(e, t) { this.#s.has(e) || this.#s.set(e, t), this.current.set(e, e.v) } activate() { z = this } deactivate() { z = null, on = null; for (const e of ar) if (ar.delete(e), e(), z !== null) break } neuter() { this.#u = !0 } flush() { ft.length > 0 ? Fr() : this.#h(), z === this && (this.#e === 0 && jt.delete(this), this.deactivate()) } #h() { if (!this.#u) for (const e of this.#i) e(); this.#i.clear() } increment() { this.#e += 1 } decrement() { if (this.#e -= 1, this.#e === 0) { for (const e of this.#f) ie(e, ye), dt(e); for (const e of this.#d) ie(e, Ne), dt(e); this.#r = [], this.#t = [], this.flush() } else this.deactivate() } add_callback(e) { this.#i.add(e) } settled() { return (this.#c ??= qs()).promise } static ensure() { if (z === null) { const e = z = new kt; jt.add(z), an || kt.enqueue(() => { z === e && e.flush() }) } return z } static enqueue(e) { fn.length === 0 && queueMicrotask(Br), fn.unshift(e) } } function vi(n) { var e = an; an = !0; try { for (var t; ;) { if (ai(), ft.length === 0 && (z?.flush(), ft.length === 0)) return _n = null, t; Fr() } } finally { an = e } } function Fr() { var n = Ct; Ln = !0; try { var e = 0; for (ur(!0); ft.length > 0;) { var t = kt.ensure(); if (e++ > 1e3) { var r, s; pi() } t.process(ft), ct.clear() } } finally { Ln = !1, ur(n), _n = null } } function pi() { try { zs() } catch (n) { Zn(n, _n) } } function lr(n) { var e = n.length; if (e !== 0) { for (var t = 0; t < e;) { var r = n[t++]; if ((r.f & (vt | Se)) === 0 && Vt(r)) { var s = z ? z.current.size : 0; if (St(r), r.deps === null && r.first === null && r.nodes_start === null && (r.teardown === null && r.ac === null ? Jr(r) : r.fn = null), z !== null && z.current.size > s && (r.f & $n) !== 0) break } } for (; t < e;)dt(n[t++]) } } function dt(n) { for (var e = _n = n; e.parent !== null;) { e = e.parent; var t = e.f; if (Ln && e === I && (t & Wt) !== 0) return; if ((t & (ht | je)) !== 0) { if ((t & ee) === 0) return; e.f ^= ee } } ft.push(e) } const ct = new Map; function Dt(n, e) { var t = { f: 0, v: n, reactions: null, equals: Lr, rv: 0, wv: 0 }; return t } function _e(n, e) { const t = Dt(n); return es(t), t } function ln(n, e = !1, t = !0) { const r = Dt(n); return e || (r.equals = jr), Tt && t && U !== null && U.l !== null && (U.l.s ??= []).push(r), r } function B(n, e, t = !1) { L !== null && (!xe || (L.f & or) !== 0) && qt() && (L.f & (ue | Wt | Wn | or)) !== 0 && !Le?.includes(n) && Fs(); let r = t ? Ie(e) : e; return dn(n, r) } function dn(n, e) { if (!n.equals(e)) { var t = n.v; pt ? ct.set(n, e) : ct.set(n, t), n.v = e; var r = kt.ensure(); r.capture(n, t), (n.f & ue) !== 0 && ((n.f & ye) !== 0 && Yn(n), ie(n, (n.f & me) === 0 ? ee : Ne)), n.wv = ns(), $r(n, ye), qt() && I !== null && (I.f & ee) !== 0 && (I.f & (je | ht)) === 0 && (ge === null ? xi([n]) : ge.push(n)) } return e } function Sn(n) { B(n, n.v + 1) } function $r(n, e) { var t = n.reactions; if (t !== null) for (var r = qt(), s = t.length, i = 0; i < s; i++) { var o = t[i], a = o.f; if (!(!r && o === I)) { var l = (a & ye) === 0; l && ie(o, e), (a & ue) !== 0 ? $r(o, Ne) : l && dt(o) } } } function Ie(n) { if (typeof n != "object" || n === null || lt in n) return n; const e = Dn(n); if (e !== ks && e !== xs) return n; var t = new Map, r = $t(n), s = _e(0), i = ut, o = a => { if (ut === i) return a(); var l = L, u = ut; Te(null), dr(i); var v = a(); return Te(l), dr(u), v }; return r && t.set("length", _e(n.length)), new Proxy(n, { defineProperty(a, l, u) { (!("value" in u) || u.configurable === !1 || u.enumerable === !1 || u.writable === !1) && Ds(); var v = t.get(l); return v === void 0 ? v = o(() => { var g = _e(u.value); return t.set(l, g), g }) : B(v, u.value, !0), !0 }, deleteProperty(a, l) { var u = t.get(l); if (u === void 0) { if (l in a) { const v = o(() => _e(X)); t.set(l, v), Sn(s) } } else B(u, X), Sn(s); return !0 }, get(a, l, u) { if (l === lt) return n; var v = t.get(l), g = l in a; if (v === void 0 && (!g || Ge(a, l)?.writable) && (v = o(() => { var p = Ie(g ? a[l] : X), h = _e(p); return h }), t.set(l, v)), v !== void 0) { var d = c(v); return d === X ? void 0 : d } return Reflect.get(a, l, u) }, getOwnPropertyDescriptor(a, l) { var u = Reflect.getOwnPropertyDescriptor(a, l); if (u && "value" in u) { var v = t.get(l); v && (u.value = c(v)) } else if (u === void 0) { var g = t.get(l), d = g?.v; if (g !== void 0 && d !== X) return { enumerable: !0, configurable: !0, value: d, writable: !0 } } return u }, has(a, l) { if (l === lt) return !0; var u = t.get(l), v = u !== void 0 && u.v !== X || Reflect.has(a, l); if (u !== void 0 || I !== null && (!v || Ge(a, l)?.writable)) { u === void 0 && (u = o(() => { var d = v ? Ie(a[l]) : X, p = _e(d); return p }), t.set(l, u)); var g = c(u); if (g === X) return !1 } return v }, set(a, l, u, v) { var g = t.get(l), d = l in a; if (r && l === "length") for (var p = u; p < g.v; p += 1) { var h = t.get(p + ""); h !== void 0 ? B(h, X) : p in a && (h = o(() => _e(X)), t.set(p + "", h)) } if (g === void 0) (!d || Ge(a, l)?.writable) && (g = o(() => _e(void 0)), B(g, Ie(u)), t.set(l, g)); else { d = g.v !== X; var _ = o(() => Ie(u)); B(g, _) } var R = Reflect.getOwnPropertyDescriptor(a, l); if (R?.set && R.set.call(v, u), !d) { if (r && typeof l == "string") { var y = t.get("length"), O = Number(l); Number.isInteger(O) && O >= y.v && B(y, O + 1) } Sn(s) } return !0 }, ownKeys(a) { c(s); var l = Reflect.ownKeys(a).filter(g => { var d = t.get(g); return d === void 0 || d.v !== X }); for (var [u, v] of t) v.v !== X && !(u in a) && l.push(u); return l }, setPrototypeOf() { Bs() } }) } var cr, Wr, Kr, Hr; function bi() { if (cr === void 0) { cr = window, Wr = /Firefox/.test(navigator.userAgent); var n = Element.prototype, e = Node.prototype, t = Text.prototype; Kr = Ge(e, "firstChild").get, Hr = Ge(e, "nextSibling").get, ir(n) && (n.__click = void 0, n.__className = void 0, n.__attributes = null, n.__style = void 0, n.__e = void 0), ir(t) && (t.__t = void 0) } } function Ht(n = "") { return document.createTextNode(n) } function hn(n) { return Kr.call(n) } function mn(n) { return Hr.call(n) } function W(n, e) { return hn(n) } function G(n, e) { { var t = hn(n); return t instanceof Comment && t.data === "" ? mn(t) : t } } function j(n, e = 1, t = !1) { let r = n; for (; e--;)r = mn(r); return r } function gi(n) { n.textContent = "" } function Jn() { return !1 } function Vr(n) { I === null && L === null && Ns(), L !== null && (L.f & me) !== 0 && I === null && js(), pt && As() } function _i(n, e) { var t = e.last; t === null ? e.last = e.first = n : (t.next = n, n.prev = t, e.last = n) } function ze(n, e, t, r = !0) { var s = I; s !== null && (s.f & Se) !== 0 && (n |= Se); var i = { ctx: U, deps: null, nodes_start: null, nodes_end: null, f: n | ye, first: null, fn: e, last: null, next: null, parent: s, b: s && s.b, prev: null, teardown: null, transitions: null, wv: 0, ac: null }; if (t) try { St(i), i.f |= Bn } catch (l) { throw Ae(i), l } else e !== null && dt(i); var o = t && i.deps === null && i.first === null && i.nodes_start === null && i.teardown === null && (i.f & Fn) === 0; if (!o && r && (s !== null && _i(i, s), L !== null && (L.f & ue) !== 0 && (n & ht) === 0)) { var a = L; (a.effects ??= []).push(i) } return i } function mi(n) { const e = ze(pn, null, !1); return ie(e, ee), e.teardown = n, e } function Bt(n) { Vr(); var e = I.f, t = !L && (e & je) !== 0 && (e & Bn) === 0; if (t) { var r = U; (r.e ??= []).push(n) } else return Zr(n) } function Zr(n) { return ze(Rr | $n, n, !1) } function yi(n) { return Vr(), ze(pn | $n, n, !0) } function wi(n) { kt.ensure(); const e = ze(ht, n, !0); return (t = {}) => new Promise(r => { t.outro ? yn(e, () => { Ae(e), r(void 0) }) : (Ae(e), r(void 0)) }) } function Ci(n, e) { var t = U, r = { effect: null, ran: !1, deps: n }; t.l.$.push(r), r.effect = Qn(() => { n(), !r.ran && (r.ran = !0, bt(e)) }) } function Si() { var n = U; Qn(() => { for (var e of n.l.$) { e.deps(); var t = e.effect; (t.f & ee) !== 0 && ie(t, Ne), Vt(t) && St(t), e.ran = !1 } }) } function Ei(n) { return ze(Wn | Fn, n, !0) } function Qn(n, e = 0) { return ze(pn | e, n, !0) } function Q(n, e = [], t = []) { di(e, t, r => { ze(pn, () => n(...r.map(c)), !0) }) } function Xn(n, e = 0) { var t = ze(Wt | e, n, !0); return t } function xt(n, e = !0) { return ze(je, n, !0, e) } function Gr(n) { var e = n.teardown; if (e !== null) { const t = pt, r = L; fr(!0), Te(null); try { e.call(null) } finally { fr(t), Te(r) } } } function Yr(n, e = !1) { var t = n.first; for (n.first = n.last = null; t !== null;) { t.ac?.abort(Kn); var r = t.next; (t.f & ht) !== 0 ? t.parent = null : Ae(t, e), t = r } } function Oi(n) { for (var e = n.first; e !== null;) { var t = e.next; (e.f & je) === 0 && Ae(e), e = t } } function Ae(n, e = !0) { var t = !1; (e || (n.f & Rs) !== 0) && n.nodes_start !== null && n.nodes_end !== null && (ki(n.nodes_start, n.nodes_end), t = !0), Yr(n, e && !t), vn(n, 0), ie(n, vt); var r = n.transitions; if (r !== null) for (const i of r) i.stop(); Gr(n); var s = n.parent; s !== null && s.first !== null && Jr(n), n.next = n.prev = n.teardown = n.ctx = n.deps = n.fn = n.nodes_start = n.nodes_end = n.ac = null } function ki(n, e) { for (; n !== null;) { var t = n === e ? null : mn(n); n.remove(), n = t } } function Jr(n) { var e = n.parent, t = n.prev, r = n.next; t !== null && (t.next = r), r !== null && (r.prev = t), e !== null && (e.first === n && (e.first = r), e.last === n && (e.last = t)) } function yn(n, e) { var t = []; er(n, t, !0), Qr(t, () => { Ae(n), e && e() }) } function Qr(n, e) { var t = n.length; if (t > 0) { var r = () => --t || e(); for (var s of n) s.out(r) } else e() } function er(n, e, t) { if ((n.f & Se) === 0) { if (n.f ^= Se, n.transitions !== null) for (const o of n.transitions) (o.is_global || t) && e.push(o); for (var r = n.first; r !== null;) { var s = r.next, i = (r.f & bn) !== 0 || (r.f & je) !== 0; er(r, e, i ? t : !1), r = s } } } function tr(n) { Xr(n, !0) } function Xr(n, e) { if ((n.f & Se) !== 0) { n.f ^= Se, (n.f & ee) === 0 && (ie(n, ye), dt(n)); for (var t = n.first; t !== null;) { var r = t.next, s = (t.f & bn) !== 0 || (t.f & je) !== 0; Xr(t, s ? e : !1), t = r } if (n.transitions !== null) for (const i of n.transitions) (i.is_global || e) && i.in() } } let Ct = !1; function ur(n) { Ct = n } let pt = !1; function fr(n) { pt = n } let L = null, xe = !1; function Te(n) { L = n } let I = null; function Ye(n) { I = n } let Le = null; function es(n) { L !== null && (Le === null ? Le = [n] : Le.push(n)) } let se = null, le = 0, ge = null; function xi(n) { ge = n } let ts = 1, Ft = 0, ut = Ft; function dr(n) { ut = n } let Ze = !1; function ns() { return ++ts } function Vt(n) { var e = n.f; if ((e & ye) !== 0) return !0; if ((e & Ne) !== 0) { var t = n.deps, r = (e & me) !== 0; if (t !== null) { var s, i, o = (e & cn) !== 0, a = r && I !== null && !Ze, l = t.length; if ((o || a) && (I === null || (I.f & vt) === 0)) { var u = n, v = u.parent; for (s = 0; s < l; s++)i = t[s], (o || !i?.reactions?.includes(u)) && (i.reactions ??= []).push(u); o && (u.f ^= cn), a && v !== null && (v.f & me) === 0 && (u.f ^= me) } for (s = 0; s < l; s++)if (i = t[s], Vt(i) && Mr(i), i.wv > n.wv) return !0 } (!r || I !== null && !Ze) && ie(n, ee) } return !1 } function rs(n, e, t = !0) { var r = n.reactions; if (r !== null && !Le?.includes(n)) for (var s = 0; s < r.length; s++) { var i = r[s]; (i.f & ue) !== 0 ? rs(i, e, !1) : e === i && (t ? ie(i, ye) : (i.f & ee) !== 0 && ie(i, Ne), dt(i)) } } function ss(n) { var e = se, t = le, r = ge, s = L, i = Ze, o = Le, a = U, l = xe, u = ut, v = n.f; se = null, le = 0, ge = null, Ze = (v & me) !== 0 && (xe || !Ct || L === null), L = (v & (je | ht)) === 0 ? n : null, Le = null, un(n.ctx), xe = !1, ut = ++Ft, n.ac !== null && (n.ac.abort(Kn), n.ac = null); try { n.f |= Pn; var g = (0, n.fn)(), d = n.deps; if (se !== null) { var p; if (vn(n, le), d !== null && le > 0) for (d.length = le + se.length, p = 0; p < se.length; p++)d[le + p] = se[p]; else n.deps = d = se; if (!Ze || (v & ue) !== 0 && n.reactions !== null) for (p = le; p < d.length; p++)(d[p].reactions ??= []).push(n) } else d !== null && le < d.length && (vn(n, le), d.length = le); if (qt() && ge !== null && !xe && d !== null && (n.f & (ue | Ne | ye)) === 0) for (p = 0; p < ge.length; p++)rs(ge[p], n); return s !== null && s !== n && (Ft++, ge !== null && (r === null ? r = ge : r.push(...ge))), (n.f & at) !== 0 && (n.f ^= at), g } catch (h) { return si(h) } finally { n.f ^= Pn, se = e, le = t, ge = r, L = s, Ze = i, Le = o, un(a), xe = l, ut = u } } function Ti(n, e) { let t = e.reactions; if (t !== null) { var r = Os.call(t, n); if (r !== -1) { var s = t.length - 1; s === 0 ? t = e.reactions = null : (t[r] = t[s], t.pop()) } } t === null && (e.f & ue) !== 0 && (se === null || !se.includes(e)) && (ie(e, Ne), (e.f & (me | cn)) === 0 && (e.f ^= cn), Ur(e), vn(e, 0)) } function vn(n, e) { var t = n.deps; if (t !== null) for (var r = e; r < t.length; r++)Ti(n, t[r]) } function St(n) { var e = n.f; if ((e & vt) === 0) { ie(n, ee); var t = I, r = Ct; I = n, Ct = !0; try { (e & Wt) !== 0 ? Oi(n) : Yr(n), Gr(n); var s = ss(n); n.teardown = typeof s == "function" ? s : null, n.wv = ts; var i; Tr && ti && (n.f & ye) !== 0 && n.deps } finally { Ct = r, I = t } } } async function qi() { await Promise.resolve(), vi() } function c(n) { var e = n.f, t = (e & ue) !== 0; if (L !== null && !xe) { var r = I !== null && (I.f & vt) !== 0; if (!r && !Le?.includes(n)) { var s = L.deps; if ((L.f & Pn) !== 0) n.rv < Ft && (n.rv = Ft, se === null && s !== null && s[le] === n ? le++ : se === null ? se = [n] : (!Ze || !se.includes(n)) && se.push(n)); else { (L.deps ??= []).push(n); var i = n.reactions; i === null ? n.reactions = [L] : i.includes(L) || i.push(L) } } } else if (t && n.deps === null && n.effects === null) { var o = n, a = o.parent; a !== null && (a.f & me) === 0 && (o.f ^= me) } if (pt) { if (ct.has(n)) return ct.get(n); if (t) { o = n; var l = o.v; return ((o.f & ee) === 0 && o.reactions !== null || is(o)) && (l = Yn(o)), ct.set(o, l), l } } else if (t) { if (o = n, Ot?.has(o)) return Ot.get(o); Vt(o) && Mr(o) } if ((n.f & at) !== 0) throw n.v; return n.v } function is(n) { if (n.v === X) return !0; if (n.deps === null) return !1; for (const e of n.deps) if (ct.has(e) || (e.f & ue) !== 0 && is(e)) return !0; return !1 } function bt(n) { var e = xe; try { return xe = !0, n() } finally { xe = e } } const Ri = -7169; function ie(n, e) { n.f = n.f & Ri | e } function os(n) { if (!(typeof n != "object" || !n || n instanceof EventTarget)) { if (lt in n) An(n); else if (!Array.isArray(n)) for (let e in n) { const t = n[e]; typeof t == "object" && t && lt in t && An(t) } } } function An(n, e = new Set) { if (typeof n == "object" && n !== null && !(n instanceof EventTarget) && !e.has(n)) { e.add(n), n instanceof Date && n.getTime(); for (let r in n) try { An(n[r], e) } catch { } const t = Dn(n); if (t !== Object.prototype && t !== Array.prototype && t !== Map.prototype && t !== Set.prototype && t !== Date.prototype) { const r = qr(t); for (let s in r) { const i = r[s].get; if (i) try { i.call(n) } catch { } } } } } const Pi = ["touchstart", "touchmove"]; function Ii(n) { return Pi.includes(n) } let hr = !1; function Li() { hr || (hr = !0, document.addEventListener("reset", n => { Promise.resolve().then(() => { if (!n.defaultPrevented) for (const e of n.target.elements) e.__on_r?.() }) }, { capture: !0 })) } function as(n) { var e = L, t = I; Te(null), Ye(null); try { return n() } finally { Te(e), Ye(t) } } function Ai(n, e, t, r = t) { n.addEventListener(e, () => as(t)); const s = n.__on_r; s ? n.__on_r = () => { s(), r(!0) } : n.__on_r = () => r(!0), Li() } const ls = new Set, jn = new Set; function ji(n, e, t, r = {}) { function s(i) { if (r.capture || zt.call(e, i), !i.cancelBubble) return as(() => t?.call(this, i)) } return n.startsWith("pointer") || n.startsWith("touch") || n === "wheel" ? oi(() => { e.addEventListener(n, s, r) }) : e.addEventListener(n, s, r), s } function tn(n, e, t, r, s) { var i = { capture: r, passive: s }, o = ji(n, e, t, i); (e === document.body || e === window || e === document || e instanceof HTMLMediaElement) && mi(() => { e.removeEventListener(n, o, i) }) } function Ni(n) { for (var e = 0; e < n.length; e++)ls.add(n[e]); for (var t of jn) t(n) } let vr = null; function zt(n) { var e = this, t = e.ownerDocument, r = n.type, s = n.composedPath?.() || [], i = s[0] || n.target; vr = n; var o = 0, a = vr === n && n.__root; if (a) { var l = s.indexOf(a); if (l !== -1 && (e === document || e === window)) { n.__root = e; return } var u = s.indexOf(e); if (u === -1) return; l <= u && (o = l) } if (i = s[o] || n.target, i !== e) { Rn(n, "currentTarget", { configurable: !0, get() { return i || t } }); var v = L, g = I; Te(null), Ye(null); try { for (var d, p = []; i !== null;) { var h = i.assignedSlot || i.parentNode || i.host || null; try { var _ = i["__" + r]; if (_ != null && (!i.disabled || n.target === i)) if ($t(_)) { var [R, ...y] = _; R.apply(i, [n, ...y]) } else _.call(i, n) } catch (O) { d ? p.push(O) : d = O } if (n.cancelBubble || h === e || h === null) break; i = h } if (d) { for (let O of p) queueMicrotask(() => { throw O }); throw d } } finally { n.__root = e, delete n.currentTarget, Te(v), Ye(g) } } } function zi(n) { var e = document.createElement("template"); return e.innerHTML = n.replaceAll("<!>", "<!---->"), e.content } function Nn(n, e) { var t = I; t.nodes_start === null && (t.nodes_start = n, t.nodes_end = e) } function M(n, e) { var t = (e & Js) !== 0, r = (e & Qs) !== 0, s, i = !n.startsWith("<!>"); return () => { s === void 0 && (s = zi(i ? n : "<!>" + n), t || (s = hn(s))); var o = r || Wr ? document.importNode(s, !0) : s.cloneNode(!0); if (t) { var a = hn(o), l = o.lastChild; Nn(a, l) } else Nn(o, o); return o } } function ke() { var n = document.createDocumentFragment(), e = document.createComment(""), t = Ht(); return n.append(e, t), Nn(e, t), n } function q(n, e) { n !== null && n.before(e) } function He(n, e) { var t = e == null ? "" : typeof e == "object" ? e + "" : e; t !== (n.__t ??= n.nodeValue) && (n.__t = t, n.nodeValue = t + "") } function Ui(n, e) { return Mi(n, e) } const mt = new Map; function Mi(n, { target: e, anchor: t, props: r = {}, events: s, context: i, intro: o = !0 }) { bi(); var a = new Set, l = g => { for (var d = 0; d < g.length; d++) { var p = g[d]; if (!a.has(p)) { a.add(p); var h = Ii(p); e.addEventListener(p, zt, { passive: h }); var _ = mt.get(p); _ === void 0 ? (document.addEventListener(p, zt, { passive: h }), mt.set(p, 1)) : mt.set(p, _ + 1) } } }; l(Mn(ls)), jn.add(l); var u = void 0, v = wi(() => { var g = t ?? e.appendChild(Ht()); return xt(() => { if (i) { Hn({}); var d = U; d.c = i } s && (r.$$events = s), u = n(g, r) || {}, i && Vn() }), () => { for (var d of a) { e.removeEventListener(d, zt); var p = mt.get(d); --p === 0 ? (document.removeEventListener(d, zt), mt.delete(d)) : mt.set(d, p) } jn.delete(l), g !== t && g.parentNode?.removeChild(g) } }); return Di.set(u, v), u } let Di = new WeakMap; function J(n, e, t = !1) { var r = n, s = null, i = null, o = X, a = t ? bn : 0, l = !1; const u = (p, h = !0) => { l = !0, d(h, p) }; var v = null; function g() { v !== null && (v.lastChild.remove(), r.before(v), v = null); var p = o ? s : i, h = o ? i : s; p && tr(p), h && yn(h, () => { o ? i = null : s = null }) } const d = (p, h) => { if (o !== (o = p)) { var _ = Jn(), R = r; if (_ && (v = document.createDocumentFragment(), v.append(R = Ht())), o ? s ??= h && xt(() => h(R)) : i ??= h && xt(() => h(R)), _) { var y = z, O = o ? s : i, m = o ? i : s; O && y.skipped_effects.delete(O), m && y.skipped_effects.add(m), y.add_callback(g) } else g() } }; Xn(() => { l = !1, e(u), l || d(null, null) }, a) } function pr(n, e) { return e } function Bi(n, e, t) { for (var r = n.items, s = [], i = e.length, o = 0; o < i; o++)er(e[o].e, s, !0); var a = i > 0 && s.length === 0 && t !== null; if (a) { var l = t.parentNode; gi(l), l.append(t), r.clear(), Oe(n, e[0].prev, e[i - 1].next) } Qr(s, () => { for (var u = 0; u < i; u++) { var v = e[u]; a || (r.delete(v.k), Oe(n, v.prev, v.next)), Ae(v.e, !a) } }) } function En(n, e, t, r, s, i = null) { var o = n, a = { flags: e, items: new Map, first: null }, l = null, u = !1, v = new Map, g = Gn(() => { var _ = t(); return $t(_) ? _ : _ == null ? [] : Mn(_) }), d, p; function h() { Fi(p, d, a, v, o, s, e, r, t), i !== null && (d.length === 0 ? l ? tr(l) : l = xt(() => i(o)) : l !== null && yn(l, () => { l = null })) } Xn(() => { p ??= I, d = c(g); var _ = d.length; if (!(u && _ === 0)) { u = _ === 0; var R, y, O, m; if (Jn()) { var F = new Set, S = z; for (y = 0; y < _; y += 1) { O = d[y], m = r(O, y); var w = a.items.get(m) ?? v.get(m); w ? cs(w, O, y) : (R = us(null, a, null, null, O, m, y, s, e, t, !0), v.set(m, R)), F.add(m) } for (const [k, D] of a.items) F.has(k) || S.skipped_effects.add(D.e); S.add_callback(h) } else h(); c(g) } }) } function Fi(n, e, t, r, s, i, o, a, l) { var u = e.length, v = t.items, g = t.first, d = g, p, h = null, _ = [], R = [], y, O, m, F; for (F = 0; F < u; F += 1) { if (y = e[F], O = a(y, F), m = v.get(O), m === void 0) { var S = r.get(O); if (S !== void 0) { r.delete(O), v.set(O, S); var w = h ? h.next : d; Oe(t, h, S), Oe(t, S, w), On(S, w, s), h = S } else { var k = d ? d.e.nodes_start : s; h = us(k, t, h, h === null ? t.first : h.next, y, O, F, i, o, l) } v.set(O, h), _ = [], R = [], d = h.next; continue } if (cs(m, y, F), (m.e.f & Se) !== 0 && tr(m.e), m !== d) { if (p !== void 0 && p.has(m)) { if (_.length < R.length) { var D = R[0], A; h = D.prev; var V = _[0], Rt = _[_.length - 1]; for (A = 0; A < _.length; A += 1)On(_[A], D, s); for (A = 0; A < R.length; A += 1)p.delete(R[A]); Oe(t, V.prev, Rt.next), Oe(t, h, V), Oe(t, Rt, D), d = D, h = Rt, F -= 1, _ = [], R = [] } else p.delete(m), On(m, d, s), Oe(t, m.prev, m.next), Oe(t, m, h === null ? t.first : h.next), Oe(t, h, m), h = m; continue } for (_ = [], R = []; d !== null && d.k !== O;)(d.e.f & Se) === 0 && (p ??= new Set).add(d), R.push(d), d = d.next; if (d === null) continue; m = d } _.push(m), h = m, d = m.next } if (d !== null || p !== void 0) { for (var Pt = p === void 0 ? [] : Mn(p); d !== null;)(d.e.f & Se) === 0 && Pt.push(d), d = d.next; var Zt = Pt.length; if (Zt > 0) { var Gt = null; Bi(t, Pt, Gt) } } n.first = t.first && t.first.e, n.last = h && h.e; for (var wn of r.values()) Ae(wn.e); r.clear() } function cs(n, e, t, r) { dn(n.v, e), n.i = t } function us(n, e, t, r, s, i, o, a, l, u, v) { var g = (l & $s) !== 0, d = (l & Ks) === 0, p = g ? d ? ln(s, !1, !1) : Dt(s) : s, h = (l & Ws) === 0 ? o : Dt(o), _ = { i: h, v: p, k: i, a: null, e: null, prev: t, next: r }; try { if (n === null) { var R = document.createDocumentFragment(); R.append(n = Ht()) } return _.e = xt(() => a(n, p, h, u), ei), _.e.prev = t && t.e, _.e.next = r && r.e, t === null ? v || (e.first = _) : (t.next = _, t.e.next = _.e), r !== null && (r.prev = _, r.e.prev = _.e), _ } finally { } } function On(n, e, t) { for (var r = n.next ? n.next.e.nodes_start : t, s = e ? e.e.nodes_start : t, i = n.e.nodes_start; i !== null && i !== r;) { var o = mn(i); s.before(i), i = o } } function Oe(n, e, t) { e === null ? n.first = t : (e.next = t, e.e.next = t && t.e), t !== null && (t.prev = e, t.e.prev = e && e.e) } function br(n, e, t) { var r = n, s, i, o = null, a = null; function l() { i && (yn(i), i = null), o && (o.lastChild.remove(), r.before(o), o = null), i = a, a = null } Xn(() => { if (s !== (s = e())) { var u = Jn(); if (s) { var v = r; u && (o = document.createDocumentFragment(), o.append(v = Ht())), a = xt(() => t(v, s)) } u ? z.add_callback(l) : l() } }, bn) } function $i(n, e, t) { var r = n == null ? "" : "" + n; return r = r ? r + " " + e : e, r === "" ? null : r } function Wi(n, e) { return n == null ? null : String(n) } function Ki(n, e, t, r, s, i) { var o = n.__className; if (o !== t || o === void 0) { var a = $i(t, r); a == null ? n.removeAttribute("class") : n.className = a, n.__className = t } return i } function nn(n, e, t, r) { var s = n.__style; if (s !== e) { var i = Wi(e); i == null ? n.removeAttribute("style") : n.style.cssText = i, n.__style = e } return r } const Hi = Symbol("is custom element"), Vi = Symbol("is html"); function $(n, e, t, r) { var s = Zi(n); s[e] !== (s[e] = t) && (e === "loading" && (n[Ps] = t), t == null ? n.removeAttribute(e) : typeof t != "string" && Gi(n).includes(e) ? n[e] = t : n.setAttribute(e, t)) } function Zi(n) { return n.__attributes ??= { [Hi]: n.nodeName.includes("-"), [Vi]: n.namespaceURI === Xs } } var gr = new Map; function Gi(n) { var e = gr.get(n.nodeName); if (e) return e; gr.set(n.nodeName, e = []); for (var t, r = n, s = Element.prototype; s !== r;) { t = qr(r); for (var i in t) t[i].set && e.push(i); r = Dn(r) } return e } function Nt(n, e, t = e) { var r = qt(), s = new WeakSet; Ai(n, "input", i => { var o = i ? n.defaultValue : n.value; if (o = kn(n) ? xn(o) : o, t(o), z !== null && s.add(z), r && o !== (o = e())) { var a = n.selectionStart, l = n.selectionEnd; n.value = o ?? "", l !== null && (n.selectionStart = a, n.selectionEnd = Math.min(l, n.value.length)) } }), bt(e) == null && n.value && (t(kn(n) ? xn(n.value) : n.value), z !== null && s.add(z)), Qn(() => { var i = e(); if (n === document.activeElement) { var o = on ?? z; if (s.has(o)) return } kn(n) && i === xn(n.value) || n.type === "date" && !i && !n.value || i !== n.value && (n.value = i ?? "") }) } function kn(n) { var e = n.type; return e === "number" || e === "range" } function xn(n) { return n === "" ? null : +n } function Yi(n = !1) { const e = U, t = e.l.u; if (!t) return; let r = () => os(e.s); if (n) { let s = 0, i = {}; const o = Kt(() => { let a = !1; const l = e.s; for (const u in l) l[u] !== i[u] && (i[u] = l[u], a = !0); return a && s++, s }); r = () => c(o) } t.b.length && yi(() => { _r(e, r), Ut(t.b) }), Bt(() => { const s = bt(() => t.m.map(Ts)); return () => { for (const i of s) typeof i == "function" && i() } }), t.a.length && Bt(() => { _r(e, r), Ut(t.a) }) } function _r(n, e) { if (n.l.s) for (const t of n.l.s) c(t); e() } function mr(n, e) { var t = n.$$events?.[e.type], r = $t(t) ? t.slice() : t == null ? [] : [t]; for (var s of r) s.call(this, e) } function Ji(n, e, t) { if (n == null) return e(void 0), t && t(void 0), wt; const r = bt(() => n.subscribe(e, t)); return r.unsubscribe ? () => r.unsubscribe() : r } const yt = []; function fs(n, e) { return { subscribe: ds(n, e).subscribe } } function ds(n, e = wt) { let t = null; const r = new Set; function s(a) { if (Ar(n, a) && (n = a, t)) { const l = !yt.length; for (const u of r) u[1](), yt.push(u, n); if (l) { for (let u = 0; u < yt.length; u += 2)yt[u][0](yt[u + 1]); yt.length = 0 } } } function i(a) { s(a(n)) } function o(a, l = wt) { const u = [a, l]; return r.add(u), r.size === 1 && (t = e(s, i) || wt), a(n), () => { r.delete(u), r.size === 0 && t && (t(), t = null) } } return { set: s, update: i, subscribe: o } } function hs(n, e, t) { const r = !Array.isArray(n), s = r ? [n] : n; if (!s.every(Boolean)) throw new Error("derived() expects stores as input, got a falsy value"); const i = e.length < 2; return fs(t, (o, a) => { let l = !1; const u = []; let v = 0, g = wt; const d = () => { if (v) return; g(); const h = e(r ? u[0] : u, o, a); i ? o(h) : g = typeof h == "function" ? h : wt }, p = s.map((h, _) => Ji(h, R => { u[_] = R, v &= ~(1 << _), l && d() }, () => { v |= 1 << _ })); return l = !0, d(), function () { Ut(p), g(), l = !1 } }) } let rn = !1; function Qi(n) { var e = rn; try { return rn = !1, [n(), rn] } finally { rn = e } } const Xi = { get(n, e) { let t = n.props.length; for (; t--;) { let r = n.props[t]; if (At(r) && (r = r()), typeof r == "object" && r !== null && e in r) return r[e] } }, set(n, e, t) { let r = n.props.length; for (; r--;) { let s = n.props[r]; At(s) && (s = s()); const i = Ge(s, e); if (i && i.set) return i.set(t), !0 } return !1 }, getOwnPropertyDescriptor(n, e) { let t = n.props.length; for (; t--;) { let r = n.props[t]; if (At(r) && (r = r()), typeof r == "object" && r !== null && e in r) { const s = Ge(r, e); return s && !s.configurable && (s.configurable = !0), s } } }, has(n, e) { if (e === lt || e === Ir) return !1; for (let t of n.props) if (At(t) && (t = t()), t != null && e in t) return !0; return !1 }, ownKeys(n) { const e = []; for (let t of n.props) if (At(t) && (t = t()), !!t) { for (const r in t) e.includes(r) || e.push(r); for (const r of Object.getOwnPropertySymbols(t)) e.includes(r) || e.push(r) } return e } }; function yr(...n) { return new Proxy({ props: n }, Xi) } function Tn(n, e, t, r) { var s = !Tt || (t & Vs) !== 0, i = (t & Gs) !== 0, o = (t & Ys) !== 0, a = r, l = !0, u = () => (l && (l = !1, a = o ? bt(r) : r), a), v; if (i) { var g = lt in n || Ir in n; v = Ge(n, e)?.set ?? (g && e in n ? m => n[e] = m : void 0) } var d, p = !1; i ? [d, p] = Qi(() => n[e]) : d = n[e], d === void 0 && r !== void 0 && (d = u(), v && (s && Ms(), v(d))); var h; if (s ? h = () => { var m = n[e]; return m === void 0 ? u() : (l = !0, m) } : h = () => { var m = n[e]; return m !== void 0 && (a = void 0), m === void 0 ? a : m }, s && (t & Zs) === 0) return h; if (v) { var _ = n.$$legacy; return function (m, F) { return arguments.length > 0 ? ((!s || !F || _ || p) && v(F ? h() : m), m) : h() } } var R = !1, y = ((t & Hs) !== 0 ? Kt : Gn)(() => (R = !1, h())); i && c(y); var O = I; return function (m, F) { if (arguments.length > 0) { const S = F ? c(y) : s && i ? Ie(m) : m; return B(y, S), R = !0, a !== void 0 && (a = S), m } return pt && R || (O.f & vt) !== 0 ? y.v : c(y) } } function vs(n) { U === null && gn(), Tt && U.l !== null ? ps(U).m.push(n) : Bt(() => { const e = bt(n); if (typeof e == "function") return e }) } function eo(n) { U === null && gn(), vs(() => () => bt(n)) } function to(n, e, { bubbles: t = !1, cancelable: r = !1 } = {}) { return new CustomEvent(n, { detail: e, bubbles: t, cancelable: r }) } function no() { const n = U; return n === null && gn(), (e, t, r) => { const s = n.s.$$events?.[e]; if (s) { const i = $t(s) ? s.slice() : [s], o = to(e, t, r); for (const a of i) a.call(n.x, o); return !o.defaultPrevented } return !0 } } function ro(n) { U === null && gn(), U.l === null && Us(), ps(U).a.push(n) } function ps(n) { var e = n.l; return e.u ??= { a: [], b: [], m: [] } } const so = "5"; typeof window < "u" && ((window.__svelte ??= {}).v ??= new Set).add(so); ni(); class ce extends Error { constructor(e) { super("ClientResponseError"), this.url = "", this.status = 0, this.response = {}, this.isAbort = !1, this.originalError = null, Object.setPrototypeOf(this, ce.prototype), e !== null && typeof e == "object" && (this.url = typeof e.url == "string" ? e.url : "", this.status = typeof e.status == "number" ? e.status : 0, this.isAbort = !!e.isAbort, this.originalError = e.originalError, e.response !== null && typeof e.response == "object" ? this.response = e.response : e.data !== null && typeof e.data == "object" ? this.response = e.data : this.response = {}), this.originalError || e instanceof ce || (this.originalError = e), typeof DOMException < "u" && e instanceof DOMException && (this.isAbort = !0), this.name = "ClientResponseError " + this.status, this.message = this.response?.message, this.message || (this.isAbort ? this.message = "The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation." : this.originalError?.cause?.message?.includes("ECONNREFUSED ::1") ? this.message = "Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21)." : this.message = "Something went wrong."), this.cause = this.originalError } get data() { return this.response } toJSON() { return { ...this } } } const sn = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/; function io(n, e) { const t = {}; if (typeof n != "string") return t; const r = Object.assign({}, {}).decode || oo; let s = 0; for (; s < n.length;) { const i = n.indexOf("=", s); if (i === -1) break; let o = n.indexOf(";", s); if (o === -1) o = n.length; else if (o < i) { s = n.lastIndexOf(";", i - 1) + 1; continue } const a = n.slice(s, i).trim(); if (t[a] === void 0) { let l = n.slice(i + 1, o).trim(); l.charCodeAt(0) === 34 && (l = l.slice(1, -1)); try { t[a] = r(l) } catch { t[a] = l } } s = o + 1 } return t } function wr(n, e, t) { const r = Object.assign({}, t || {}), s = r.encode || ao; if (!sn.test(n)) throw new TypeError("argument name is invalid"); const i = s(e); if (i && !sn.test(i)) throw new TypeError("argument val is invalid"); let o = n + "=" + i; if (r.maxAge != null) { const a = r.maxAge - 0; if (isNaN(a) || !isFinite(a)) throw new TypeError("option maxAge is invalid"); o += "; Max-Age=" + Math.floor(a) } if (r.domain) { if (!sn.test(r.domain)) throw new TypeError("option domain is invalid"); o += "; Domain=" + r.domain } if (r.path) { if (!sn.test(r.path)) throw new TypeError("option path is invalid"); o += "; Path=" + r.path } if (r.expires) { if (!function (l) { return Object.prototype.toString.call(l) === "[object Date]" || l instanceof Date }(r.expires) || isNaN(r.expires.valueOf())) throw new TypeError("option expires is invalid"); o += "; Expires=" + r.expires.toUTCString() } if (r.httpOnly && (o += "; HttpOnly"), r.secure && (o += "; Secure"), r.priority) switch (typeof r.priority == "string" ? r.priority.toLowerCase() : r.priority) { case "low": o += "; Priority=Low"; break; case "medium": o += "; Priority=Medium"; break; case "high": o += "; Priority=High"; break; default: throw new TypeError("option priority is invalid") }if (r.sameSite) switch (typeof r.sameSite == "string" ? r.sameSite.toLowerCase() : r.sameSite) { case !0: o += "; SameSite=Strict"; break; case "lax": o += "; SameSite=Lax"; break; case "strict": o += "; SameSite=Strict"; break; case "none": o += "; SameSite=None"; break; default: throw new TypeError("option sameSite is invalid") }return o } function oo(n) { return n.indexOf("%") !== -1 ? decodeURIComponent(n) : n } function ao(n) { return encodeURIComponent(n) } const lo = typeof navigator < "u" && navigator.product === "ReactNative" || typeof global < "u" && global.HermesInternal; let bs; function Et(n) { if (n) try { const e = decodeURIComponent(bs(n.split(".")[1]).split("").map(function (t) { return "%" + ("00" + t.charCodeAt(0).toString(16)).slice(-2) }).join("")); return JSON.parse(e) || {} } catch { } return {} } function gs(n, e = 0) { let t = Et(n); return !(Object.keys(t).length > 0 && (!t.exp || t.exp - e > Date.now() / 1e3)) } bs = typeof atob != "function" || lo ? n => { let e = String(n).replace(/=+$/, ""); if (e.length % 4 == 1) throw new Error("'atob' failed: The string to be decoded is not correctly encoded."); for (var t, r, s = 0, i = 0, o = ""; r = e.charAt(i++); ~r && (t = s % 4 ? 64 * t + r : r, s++ % 4) ? o += String.fromCharCode(255 & t >> (-2 * s & 6)) : 0)r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r); return o } : atob; const Cr = "pb_auth"; class nr { constructor() { this.baseToken = "", this.baseModel = null, this._onChangeCallbacks = [] } get token() { return this.baseToken } get record() { return this.baseModel } get model() { return this.baseModel } get isValid() { return !gs(this.token) } get isSuperuser() { let e = Et(this.token); return e.type == "auth" && (this.record?.collectionName == "_superusers" || !this.record?.collectionName && e.collectionId == "pbc_3142635823") } get isAdmin() { return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"), this.isSuperuser } get isAuthRecord() { return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"), Et(this.token).type == "auth" && !this.isSuperuser } save(e, t) { this.baseToken = e || "", this.baseModel = t || null, this.triggerChange() } clear() { this.baseToken = "", this.baseModel = null, this.triggerChange() } loadFromCookie(e, t = Cr) { const r = io(e || "")[t] || ""; let s = {}; try { s = JSON.parse(r), (typeof s === null || typeof s != "object" || Array.isArray(s)) && (s = {}) } catch { } this.save(s.token || "", s.record || s.model || null) } exportToCookie(e, t = Cr) { const r = { secure: !0, sameSite: !0, httpOnly: !0, path: "/" }, s = Et(this.token); r.expires = s?.exp ? new Date(1e3 * s.exp) : new Date("1970-01-01"), e = Object.assign({}, r, e); const i = { token: this.token, record: this.record ? JSON.parse(JSON.stringify(this.record)) : null }; let o = wr(t, JSON.stringify(i), e); const a = typeof Blob < "u" ? new Blob([o]).size : o.length; if (i.record && a > 4096) { i.record = { id: i.record?.id, email: i.record?.email }; const l = ["collectionId", "collectionName", "verified"]; for (const u in this.record) l.includes(u) && (i.record[u] = this.record[u]); o = wr(t, JSON.stringify(i), e) } return o } onChange(e, t = !1) { return this._onChangeCallbacks.push(e), t && e(this.token, this.record), () => { for (let r = this._onChangeCallbacks.length - 1; r >= 0; r--)if (this._onChangeCallbacks[r] == e) return delete this._onChangeCallbacks[r], void this._onChangeCallbacks.splice(r, 1) } } triggerChange() { for (const e of this._onChangeCallbacks) e && e(this.token, this.record) } } class co extends nr { constructor(e = "pocketbase_auth") { super(), this.storageFallback = {}, this.storageKey = e, this._bindStorageEvent() } get token() { return (this._storageGet(this.storageKey) || {}).token || "" } get record() { const e = this._storageGet(this.storageKey) || {}; return e.record || e.model || null } get model() { return this.record } save(e, t) { this._storageSet(this.storageKey, { token: e, record: t }), super.save(e, t) } clear() { this._storageRemove(this.storageKey), super.clear() } _storageGet(e) { if (typeof window < "u" && window?.localStorage) { const t = window.localStorage.getItem(e) || ""; try { return JSON.parse(t) } catch { return t } } return this.storageFallback[e] } _storageSet(e, t) { if (typeof window < "u" && window?.localStorage) { let r = t; typeof t != "string" && (r = JSON.stringify(t)), window.localStorage.setItem(e, r) } else this.storageFallback[e] = t } _storageRemove(e) { typeof window < "u" && window?.localStorage && window.localStorage?.removeItem(e), delete this.storageFallback[e] } _bindStorageEvent() { typeof window < "u" && window?.localStorage && window.addEventListener && window.addEventListener("storage", e => { if (e.key != this.storageKey) return; const t = this._storageGet(this.storageKey) || {}; super.save(t.token || "", t.record || t.model || null) }) } } class Ue { constructor(e) { this.client = e } } class uo extends Ue { async getAll(e) { return e = Object.assign({ method: "GET" }, e), this.client.send("/api/settings", e) } async update(e, t) { return t = Object.assign({ method: "PATCH", body: e }, t), this.client.send("/api/settings", t) } async testS3(e = "storage", t) { return t = Object.assign({ method: "POST", body: { filesystem: e } }, t), this.client.send("/api/settings/test/s3", t).then(() => !0) } async testEmail(e, t, r, s) { return s = Object.assign({ method: "POST", body: { email: t, template: r, collection: e } }, s), this.client.send("/api/settings/test/email", s).then(() => !0) } async generateAppleClientSecret(e, t, r, s, i, o) { return o = Object.assign({ method: "POST", body: { clientId: e, teamId: t, keyId: r, privateKey: s, duration: i } }, o), this.client.send("/api/settings/apple/generate-client-secret", o) } } const fo = ["requestKey", "$cancelKey", "$autoCancel", "fetch", "headers", "body", "query", "params", "cache", "credentials", "headers", "integrity", "keepalive", "method", "mode", "redirect", "referrer", "referrerPolicy", "signal", "window"]; function rr(n) { if (n) { n.query = n.query || {}; for (let e in n) fo.includes(e) || (n.query[e] = n[e], delete n[e]) } } function _s(n) { const e = []; for (const t in n) { const r = encodeURIComponent(t), s = Array.isArray(n[t]) ? n[t] : [n[t]]; for (let i of s) i = ho(i), i !== null && e.push(r + "=" + i) } return e.join("&") } function ho(n) { return n == null ? null : n instanceof Date ? encodeURIComponent(n.toISOString().replace("T", " ")) : encodeURIComponent(typeof n == "object" ? JSON.stringify(n) : n) } class ms extends Ue { constructor() { super(...arguments), this.clientId = "", this.eventSource = null, this.subscriptions = {}, this.lastSentSubscriptions = [], this.maxConnectTimeout = 15e3, this.reconnectAttempts = 0, this.maxReconnectAttempts = 1 / 0, this.predefinedReconnectIntervals = [200, 300, 500, 1e3, 1200, 1500, 2e3], this.pendingConnects = [] } get isConnected() { return !!this.eventSource && !!this.clientId && !this.pendingConnects.length } async subscribe(e, t, r) { if (!e) throw new Error("topic must be set."); let s = e; if (r) { rr(r = Object.assign({}, r)); const o = "options=" + encodeURIComponent(JSON.stringify({ query: r.query, headers: r.headers })); s += (s.includes("?") ? "&" : "?") + o } const i = function (o) { const a = o; let l; try { l = JSON.parse(a?.data) } catch { } t(l || {}) }; return this.subscriptions[s] || (this.subscriptions[s] = []), this.subscriptions[s].push(i), this.isConnected ? this.subscriptions[s].length === 1 ? await this.submitSubscriptions() : this.eventSource?.addEventListener(s, i) : await this.connect(), async () => this.unsubscribeByTopicAndListener(e, i) } async unsubscribe(e) { let t = !1; if (e) { const r = this.getSubscriptionsByTopic(e); for (let s in r) if (this.hasSubscriptionListeners(s)) { for (let i of this.subscriptions[s]) this.eventSource?.removeEventListener(s, i); delete this.subscriptions[s], t || (t = !0) } } else this.subscriptions = {}; this.hasSubscriptionListeners() ? t && await this.submitSubscriptions() : this.disconnect() } async unsubscribeByPrefix(e) { let t = !1; for (let r in this.subscriptions) if ((r + "?").startsWith(e)) { t = !0; for (let s of this.subscriptions[r]) this.eventSource?.removeEventListener(r, s); delete this.subscriptions[r] } t && (this.hasSubscriptionListeners() ? await this.submitSubscriptions() : this.disconnect()) } async unsubscribeByTopicAndListener(e, t) { let r = !1; const s = this.getSubscriptionsByTopic(e); for (let i in s) { if (!Array.isArray(this.subscriptions[i]) || !this.subscriptions[i].length) continue; let o = !1; for (let a = this.subscriptions[i].length - 1; a >= 0; a--)this.subscriptions[i][a] === t && (o = !0, delete this.subscriptions[i][a], this.subscriptions[i].splice(a, 1), this.eventSource?.removeEventListener(i, t)); o && (this.subscriptions[i].length || delete this.subscriptions[i], r || this.hasSubscriptionListeners(i) || (r = !0)) } this.hasSubscriptionListeners() ? r && await this.submitSubscriptions() : this.disconnect() } hasSubscriptionListeners(e) { if (this.subscriptions = this.subscriptions || {}, e) return !!this.subscriptions[e]?.length; for (let t in this.subscriptions) if (this.subscriptions[t]?.length) return !0; return !1 } async submitSubscriptions() { if (this.clientId) return this.addAllSubscriptionListeners(), this.lastSentSubscriptions = this.getNonEmptySubscriptionKeys(), this.client.send("/api/realtime", { method: "POST", body: { clientId: this.clientId, subscriptions: this.lastSentSubscriptions }, requestKey: this.getSubscriptionsCancelKey() }).catch(e => { if (!e?.isAbort) throw e }) } getSubscriptionsCancelKey() { return "realtime_" + this.clientId } getSubscriptionsByTopic(e) { const t = {}; e = e.includes("?") ? e : e + "?"; for (let r in this.subscriptions) (r + "?").startsWith(e) && (t[r] = this.subscriptions[r]); return t } getNonEmptySubscriptionKeys() { const e = []; for (let t in this.subscriptions) this.subscriptions[t].length && e.push(t); return e } addAllSubscriptionListeners() { if (this.eventSource) { this.removeAllSubscriptionListeners(); for (let e in this.subscriptions) for (let t of this.subscriptions[e]) this.eventSource.addEventListener(e, t) } } removeAllSubscriptionListeners() { if (this.eventSource) for (let e in this.subscriptions) for (let t of this.subscriptions[e]) this.eventSource.removeEventListener(e, t) } async connect() { if (!(this.reconnectAttempts > 0)) return new Promise((e, t) => { this.pendingConnects.push({ resolve: e, reject: t }), this.pendingConnects.length > 1 || this.initConnect() }) } initConnect() { this.disconnect(!0), clearTimeout(this.connectTimeoutId), this.connectTimeoutId = setTimeout(() => { this.connectErrorHandler(new Error("EventSource connect took too long.")) }, this.maxConnectTimeout), this.eventSource = new EventSource(this.client.buildURL("/api/realtime")), this.eventSource.onerror = e => { this.connectErrorHandler(new Error("Failed to establish realtime connection.")) }, this.eventSource.addEventListener("PB_CONNECT", e => { const t = e; this.clientId = t?.lastEventId, this.submitSubscriptions().then(async () => { let r = 3; for (; this.hasUnsentSubscriptions() && r > 0;)r--, await this.submitSubscriptions() }).then(() => { for (let s of this.pendingConnects) s.resolve(); this.pendingConnects = [], this.reconnectAttempts = 0, clearTimeout(this.reconnectTimeoutId), clearTimeout(this.connectTimeoutId); const r = this.getSubscriptionsByTopic("PB_CONNECT"); for (let s in r) for (let i of r[s]) i(e) }).catch(r => { this.clientId = "", this.connectErrorHandler(r) }) }) } hasUnsentSubscriptions() { const e = this.getNonEmptySubscriptionKeys(); if (e.length != this.lastSentSubscriptions.length) return !0; for (const t of e) if (!this.lastSentSubscriptions.includes(t)) return !0; return !1 } connectErrorHandler(e) { if (clearTimeout(this.connectTimeoutId), clearTimeout(this.reconnectTimeoutId), !this.clientId && !this.reconnectAttempts || this.reconnectAttempts > this.maxReconnectAttempts) { for (let r of this.pendingConnects) r.reject(new ce(e)); return this.pendingConnects = [], void this.disconnect() } this.disconnect(!0); const t = this.predefinedReconnectIntervals[this.reconnectAttempts] || this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length - 1]; this.reconnectAttempts++, this.reconnectTimeoutId = setTimeout(() => { this.initConnect() }, t) } disconnect(e = !1) { if (this.clientId && this.onDisconnect && this.onDisconnect(Object.keys(this.subscriptions)), clearTimeout(this.connectTimeoutId), clearTimeout(this.reconnectTimeoutId), this.removeAllSubscriptionListeners(), this.client.cancelRequest(this.getSubscriptionsCancelKey()), this.eventSource?.close(), this.eventSource = null, this.clientId = "", !e) { this.reconnectAttempts = 0; for (let t of this.pendingConnects) t.resolve(); this.pendingConnects = [] } } } class ys extends Ue { decode(e) { return e } async getFullList(e, t) { if (typeof e == "number") return this._getFullList(e, t); let r = 500; return (t = Object.assign({}, e, t)).batch && (r = t.batch, delete t.batch), this._getFullList(r, t) } async getList(e = 1, t = 30, r) { return (r = Object.assign({ method: "GET" }, r)).query = Object.assign({ page: e, perPage: t }, r.query), this.client.send(this.baseCrudPath, r).then(s => (s.items = s.items?.map(i => this.decode(i)) || [], s)) } async getFirstListItem(e, t) { return (t = Object.assign({ requestKey: "one_by_filter_" + this.baseCrudPath + "_" + e }, t)).query = Object.assign({ filter: e, skipTotal: 1 }, t.query), this.getList(1, 1, t).then(r => { if (!r?.items?.length) throw new ce({ status: 404, response: { code: 404, message: "The requested resource wasn't found.", data: {} } }); return r.items[0] }) } async getOne(e, t) { if (!e) throw new ce({ url: this.client.buildURL(this.baseCrudPath + "/"), status: 404, response: { code: 404, message: "Missing required record id.", data: {} } }); return t = Object.assign({ method: "GET" }, t), this.client.send(this.baseCrudPath + "/" + encodeURIComponent(e), t).then(r => this.decode(r)) } async create(e, t) { return t = Object.assign({ method: "POST", body: e }, t), this.client.send(this.baseCrudPath, t).then(r => this.decode(r)) } async update(e, t, r) { return r = Object.assign({ method: "PATCH", body: t }, r), this.client.send(this.baseCrudPath + "/" + encodeURIComponent(e), r).then(s => this.decode(s)) } async delete(e, t) { return t = Object.assign({ method: "DELETE" }, t), this.client.send(this.baseCrudPath + "/" + encodeURIComponent(e), t).then(() => !0) } _getFullList(e = 500, t) { (t = t || {}).query = Object.assign({ skipTotal: 1 }, t.query); let r = [], s = async i => this.getList(i, e || 500, t).then(o => { const a = o.items; return r = r.concat(a), a.length == o.perPage ? s(i + 1) : r }); return s(1) } } function Ve(n, e, t, r) { const s = r !== void 0; return s || t !== void 0 ? s ? (console.warn(n), e.body = Object.assign({}, e.body, t), e.query = Object.assign({}, e.query, r), e) : Object.assign(e, t) : e } function qn(n) { n._resetAutoRefresh?.() } class vo extends ys { constructor(e, t) { super(e), this.collectionIdOrName = t } get baseCrudPath() { return this.baseCollectionPath + "/records" } get baseCollectionPath() { return "/api/collections/" + encodeURIComponent(this.collectionIdOrName) } get isSuperusers() { return this.collectionIdOrName == "_superusers" || this.collectionIdOrName == "_pbc_2773867675" } async subscribe(e, t, r) { if (!e) throw new Error("Missing topic."); if (!t) throw new Error("Missing subscription callback."); return this.client.realtime.subscribe(this.collectionIdOrName + "/" + e, t, r) } async unsubscribe(e) { return e ? this.client.realtime.unsubscribe(this.collectionIdOrName + "/" + e) : this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName) } async getFullList(e, t) { if (typeof e == "number") return super.getFullList(e, t); const r = Object.assign({}, e, t); return super.getFullList(r) } async getList(e = 1, t = 30, r) { return super.getList(e, t, r) } async getFirstListItem(e, t) { return super.getFirstListItem(e, t) } async getOne(e, t) { return super.getOne(e, t) } async create(e, t) { return super.create(e, t) } async update(e, t, r) { return super.update(e, t, r).then(s => { if (this.client.authStore.record?.id === s?.id && (this.client.authStore.record?.collectionId === this.collectionIdOrName || this.client.authStore.record?.collectionName === this.collectionIdOrName)) { let i = Object.assign({}, this.client.authStore.record.expand), o = Object.assign({}, this.client.authStore.record, s); i && (o.expand = Object.assign(i, s.expand)), this.client.authStore.save(this.client.authStore.token, o) } return s }) } async delete(e, t) { return super.delete(e, t).then(r => (!r || this.client.authStore.record?.id !== e || this.client.authStore.record?.collectionId !== this.collectionIdOrName && this.client.authStore.record?.collectionName !== this.collectionIdOrName || this.client.authStore.clear(), r)) } authResponse(e) { const t = this.decode(e?.record || {}); return this.client.authStore.save(e?.token, t), Object.assign({}, e, { token: e?.token || "", record: t }) } async listAuthMethods(e) { return e = Object.assign({ method: "GET", fields: "mfa,otp,password,oauth2" }, e), this.client.send(this.baseCollectionPath + "/auth-methods", e) } async authWithPassword(e, t, r) { let s; r = Object.assign({ method: "POST", body: { identity: e, password: t } }, r), this.isSuperusers && (s = r.autoRefreshThreshold, delete r.autoRefreshThreshold, r.autoRefresh || qn(this.client)); let i = await this.client.send(this.baseCollectionPath + "/auth-with-password", r); return i = this.authResponse(i), s && this.isSuperusers && function (a, l, u, v) { qn(a); const g = a.beforeSend, d = a.authStore.record, p = a.authStore.onChange((h, _) => { (!h || _?.id != d?.id || (_?.collectionId || d?.collectionId) && _?.collectionId != d?.collectionId) && qn(a) }); a._resetAutoRefresh = function () { p(), a.beforeSend = g, delete a._resetAutoRefresh }, a.beforeSend = async (h, _) => { const R = a.authStore.token; if (_.query?.autoRefresh) return g ? g(h, _) : { url: h, sendOptions: _ }; let y = a.authStore.isValid; if (y && gs(a.authStore.token, l)) try { await u() } catch { y = !1 } y || await v(); const O = _.headers || {}; for (let m in O) if (m.toLowerCase() == "authorization" && R == O[m] && a.authStore.token) { O[m] = a.authStore.token; break } return _.headers = O, g ? g(h, _) : { url: h, sendOptions: _ } } }(this.client, s, () => this.authRefresh({ autoRefresh: !0 }), () => this.authWithPassword(e, t, Object.assign({ autoRefresh: !0 }, r))), i } async authWithOAuth2Code(e, t, r, s, i, o, a) { let l = { method: "POST", body: { provider: e, code: t, codeVerifier: r, redirectURL: s, createData: i } }; return l = Ve("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).", l, o, a), this.client.send(this.baseCollectionPath + "/auth-with-oauth2", l).then(u => this.authResponse(u)) } authWithOAuth2(...e) { if (e.length > 1 || typeof e?.[0] == "string") return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."), this.authWithOAuth2Code(e?.[0] || "", e?.[1] || "", e?.[2] || "", e?.[3] || "", e?.[4] || {}, e?.[5] || {}, e?.[6] || {}); const t = e?.[0] || {}; let r = null; t.urlCallback || (r = Sr(void 0)); const s = new ms(this.client); function i() { r?.close(), s.unsubscribe() } const o = {}, a = t.requestKey; return a && (o.requestKey = a), this.listAuthMethods(o).then(l => { const u = l.oauth2.providers.find(d => d.name === t.provider); if (!u) throw new ce(new Error(`Missing or invalid provider "${t.provider}".`)); const v = this.client.buildURL("/api/oauth2-redirect"), g = a ? this.client.cancelControllers?.[a] : void 0; return g && (g.signal.onabort = () => { i() }), new Promise(async (d, p) => { try { await s.subscribe("@oauth2", async y => { const O = s.clientId; try { if (!y.state || O !== y.state) throw new Error("State parameters don't match."); if (y.error || !y.code) throw new Error("OAuth2 redirect error or missing code: " + y.error); const m = Object.assign({}, t); delete m.provider, delete m.scopes, delete m.createData, delete m.urlCallback, g?.signal?.onabort && (g.signal.onabort = null); const F = await this.authWithOAuth2Code(u.name, y.code, u.codeVerifier, v, t.createData, m); d(F) } catch (m) { p(new ce(m)) } i() }); const h = { state: s.clientId }; t.scopes?.length && (h.scope = t.scopes.join(" ")); const _ = this._replaceQueryParams(u.authURL + v, h); await (t.urlCallback || function (y) { r ? r.location.href = y : r = Sr(y) })(_) } catch (h) { i(), p(new ce(h)) } }) }).catch(l => { throw i(), l }) } async authRefresh(e, t) { let r = { method: "POST" }; return r = Ve("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).", r, e, t), this.client.send(this.baseCollectionPath + "/auth-refresh", r).then(s => this.authResponse(s)) } async requestPasswordReset(e, t, r) { let s = { method: "POST", body: { email: e } }; return s = Ve("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).", s, t, r), this.client.send(this.baseCollectionPath + "/request-password-reset", s).then(() => !0) } async confirmPasswordReset(e, t, r, s, i) { let o = { method: "POST", body: { token: e, password: t, passwordConfirm: r } }; return o = Ve("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).", o, s, i), this.client.send(this.baseCollectionPath + "/confirm-password-reset", o).then(() => !0) } async requestVerification(e, t, r) { let s = { method: "POST", body: { email: e } }; return s = Ve("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).", s, t, r), this.client.send(this.baseCollectionPath + "/request-verification", s).then(() => !0) } async confirmVerification(e, t, r) { let s = { method: "POST", body: { token: e } }; return s = Ve("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).", s, t, r), this.client.send(this.baseCollectionPath + "/confirm-verification", s).then(() => { const i = Et(e), o = this.client.authStore.record; return o && !o.verified && o.id === i.id && o.collectionId === i.collectionId && (o.verified = !0, this.client.authStore.save(this.client.authStore.token, o)), !0 }) } async requestEmailChange(e, t, r) { let s = { method: "POST", body: { newEmail: e } }; return s = Ve("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).", s, t, r), this.client.send(this.baseCollectionPath + "/request-email-change", s).then(() => !0) } async confirmEmailChange(e, t, r, s) { let i = { method: "POST", body: { token: e, password: t } }; return i = Ve("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).", i, r, s), this.client.send(this.baseCollectionPath + "/confirm-email-change", i).then(() => { const o = Et(e), a = this.client.authStore.record; return a && a.id === o.id && a.collectionId === o.collectionId && this.client.authStore.clear(), !0 }) } async listExternalAuths(e, t) { return this.client.collection("_externalAuths").getFullList(Object.assign({}, t, { filter: this.client.filter("recordRef = {:id}", { id: e }) })) } async unlinkExternalAuth(e, t, r) { const s = await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}", { recordId: e, provider: t })); return this.client.collection("_externalAuths").delete(s.id, r).then(() => !0) } async requestOTP(e, t) { return t = Object.assign({ method: "POST", body: { email: e } }, t), this.client.send(this.baseCollectionPath + "/request-otp", t) } async authWithOTP(e, t, r) { return r = Object.assign({ method: "POST", body: { otpId: e, password: t } }, r), this.client.send(this.baseCollectionPath + "/auth-with-otp", r).then(s => this.authResponse(s)) } async impersonate(e, t, r) { (r = Object.assign({ method: "POST", body: { duration: t } }, r)).headers = r.headers || {}, r.headers.Authorization || (r.headers.Authorization = this.client.authStore.token); const s = new ws(this.client.baseURL, new nr, this.client.lang), i = await s.send(this.baseCollectionPath + "/impersonate/" + encodeURIComponent(e), r); return s.authStore.save(i?.token, this.decode(i?.record || {})), s } _replaceQueryParams(e, t = {}) { let r = e, s = ""; e.indexOf("?") >= 0 && (r = e.substring(0, e.indexOf("?")), s = e.substring(e.indexOf("?") + 1)); const i = {}, o = s.split("&"); for (const a of o) { if (a == "") continue; const l = a.split("="); i[decodeURIComponent(l[0].replace(/\+/g, " "))] = decodeURIComponent((l[1] || "").replace(/\+/g, " ")) } for (let a in t) t.hasOwnProperty(a) && (t[a] == null ? delete i[a] : i[a] = t[a]); s = ""; for (let a in i) i.hasOwnProperty(a) && (s != "" && (s += "&"), s += encodeURIComponent(a.replace(/%20/g, "+")) + "=" + encodeURIComponent(i[a].replace(/%20/g, "+"))); return s != "" ? r + "?" + s : r } } function Sr(n) { if (typeof window > "u" || !window?.open) throw new ce(new Error("Not in a browser context - please pass a custom urlCallback function.")); let e = 1024, t = 768, r = window.innerWidth, s = window.innerHeight; e = e > r ? r : e, t = t > s ? s : t; let i = r / 2 - e / 2, o = s / 2 - t / 2; return window.open(n, "popup_window", "width=" + e + ",height=" + t + ",top=" + o + ",left=" + i + ",resizable,menubar=no") } class po extends ys { get baseCrudPath() { return "/api/collections" } async import(e, t = !1, r) { return r = Object.assign({ method: "PUT", body: { collections: e, deleteMissing: t } }, r), this.client.send(this.baseCrudPath + "/import", r).then(() => !0) } async getScaffolds(e) { return e = Object.assign({ method: "GET" }, e), this.client.send(this.baseCrudPath + "/meta/scaffolds", e) } async truncate(e, t) { return t = Object.assign({ method: "DELETE" }, t), this.client.send(this.baseCrudPath + "/" + encodeURIComponent(e) + "/truncate", t).then(() => !0) } } class bo extends Ue { async getList(e = 1, t = 30, r) { return (r = Object.assign({ method: "GET" }, r)).query = Object.assign({ page: e, perPage: t }, r.query), this.client.send("/api/logs", r) } async getOne(e, t) { if (!e) throw new ce({ url: this.client.buildURL("/api/logs/"), status: 404, response: { code: 404, message: "Missing required log id.", data: {} } }); return t = Object.assign({ method: "GET" }, t), this.client.send("/api/logs/" + encodeURIComponent(e), t) } async getStats(e) { return e = Object.assign({ method: "GET" }, e), this.client.send("/api/logs/stats", e) } } class go extends Ue { async check(e) { return e = Object.assign({ method: "GET" }, e), this.client.send("/api/health", e) } } class _o extends Ue { getUrl(e, t, r = {}) { return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"), this.getURL(e, t, r) } getURL(e, t, r = {}) { if (!t || !e?.id || !e?.collectionId && !e?.collectionName) return ""; const s = []; s.push("api"), s.push("files"), s.push(encodeURIComponent(e.collectionId || e.collectionName)), s.push(encodeURIComponent(e.id)), s.push(encodeURIComponent(t)); let i = this.client.buildURL(s.join("/")); if (Object.keys(r).length) { r.download === !1 && delete r.download; const o = new URLSearchParams(r); i += (i.includes("?") ? "&" : "?") + o } return i } async getToken(e) { return e = Object.assign({ method: "POST" }, e), this.client.send("/api/files/token", e).then(t => t?.token || "") } } class mo extends Ue { async getFullList(e) { return e = Object.assign({ method: "GET" }, e), this.client.send("/api/backups", e) } async create(e, t) { return t = Object.assign({ method: "POST", body: { name: e } }, t), this.client.send("/api/backups", t).then(() => !0) } async upload(e, t) { return t = Object.assign({ method: "POST", body: e }, t), this.client.send("/api/backups/upload", t).then(() => !0) } async delete(e, t) { return t = Object.assign({ method: "DELETE" }, t), this.client.send(`/api/backups/${encodeURIComponent(e)}`, t).then(() => !0) } async restore(e, t) { return t = Object.assign({ method: "POST" }, t), this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`, t).then(() => !0) } getDownloadUrl(e, t) { return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"), this.getDownloadURL(e, t) } getDownloadURL(e, t) { return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`) } } class yo extends Ue { async getFullList(e) { return e = Object.assign({ method: "GET" }, e), this.client.send("/api/crons", e) } async run(e, t) { return t = Object.assign({ method: "POST" }, t), this.client.send(`/api/crons/${encodeURIComponent(e)}`, t).then(() => !0) } } function zn(n) { return typeof Blob < "u" && n instanceof Blob || typeof File < "u" && n instanceof File || n !== null && typeof n == "object" && n.uri && (typeof navigator < "u" && navigator.product === "ReactNative" || typeof global < "u" && global.HermesInternal) } function Un(n) { return n && (n.constructor?.name === "FormData" || typeof FormData < "u" && n instanceof FormData) } function Er(n) { for (const e in n) { const t = Array.isArray(n[e]) ? n[e] : [n[e]]; for (const r of t) if (zn(r)) return !0 } return !1 } const wo = /^[\-\.\d]+$/; function Or(n) { if (typeof n != "string") return n; if (n == "true") return !0; if (n == "false") return !1; if ((n[0] === "-" || n[0] >= "0" && n[0] <= "9") && wo.test(n)) { let e = +n; if ("" + e === n) return e } return n } class Co extends Ue { constructor() { super(...arguments), this.requests = [], this.subs = {} } collection(e) { return this.subs[e] || (this.subs[e] = new So(this.requests, e)), this.subs[e] } async send(e) { const t = new FormData, r = []; for (let s = 0; s < this.requests.length; s++) { const i = this.requests[s]; if (r.push({ method: i.method, url: i.url, headers: i.headers, body: i.json }), i.files) for (let o in i.files) { const a = i.files[o] || []; for (let l of a) t.append("requests." + s + "." + o, l) } } return t.append("@jsonPayload", JSON.stringify({ requests: r })), e = Object.assign({ method: "POST", body: t }, e), this.client.send("/api/batch", e) } } class So { constructor(e, t) { this.requests = [], this.requests = e, this.collectionIdOrName = t } upsert(e, t) { t = Object.assign({ body: e || {} }, t); const r = { method: "PUT", url: "/api/collections/" + encodeURIComponent(this.collectionIdOrName) + "/records" }; this.prepareRequest(r, t), this.requests.push(r) } create(e, t) { t = Object.assign({ body: e || {} }, t); const r = { method: "POST", url: "/api/collections/" + encodeURIComponent(this.collectionIdOrName) + "/records" }; this.prepareRequest(r, t), this.requests.push(r) } update(e, t, r) { r = Object.assign({ body: t || {} }, r); const s = { method: "PATCH", url: "/api/collections/" + encodeURIComponent(this.collectionIdOrName) + "/records/" + encodeURIComponent(e) }; this.prepareRequest(s, r), this.requests.push(s) } delete(e, t) { t = Object.assign({}, t); const r = { method: "DELETE", url: "/api/collections/" + encodeURIComponent(this.collectionIdOrName) + "/records/" + encodeURIComponent(e) }; this.prepareRequest(r, t), this.requests.push(r) } prepareRequest(e, t) { if (rr(t), e.headers = t.headers, e.json = {}, e.files = {}, t.query !== void 0) { const s = _s(t.query); s && (e.url += (e.url.includes("?") ? "&" : "?") + s) } let r = t.body; Un(r) && (r = function (i) { let o = {}; return i.forEach((a, l) => { if (l === "@jsonPayload" && typeof a == "string") try { let u = JSON.parse(a); Object.assign(o, u) } catch (u) { console.warn("@jsonPayload error:", u) } else o[l] !== void 0 ? (Array.isArray(o[l]) || (o[l] = [o[l]]), o[l].push(Or(a))) : o[l] = Or(a) }), o }(r)); for (const s in r) { const i = r[s]; if (zn(i)) e.files[s] = e.files[s] || [], e.files[s].push(i); else if (Array.isArray(i)) { const o = [], a = []; for (const l of i) zn(l) ? o.push(l) : a.push(l); if (o.length > 0 && o.length == i.length) { e.files[s] = e.files[s] || []; for (let l of o) e.files[s].push(l) } else if (e.json[s] = a, o.length > 0) { let l = s; s.startsWith("+") || s.endsWith("+") || (l += "+"), e.files[l] = e.files[l] || []; for (let u of o) e.files[l].push(u) } } else e.json[s] = i } } } class ws { get baseUrl() { return this.baseURL } set baseUrl(e) { this.baseURL = e } constructor(e = "/", t, r = "en-US") { this.cancelControllers = {}, this.recordServices = {}, this.enableAutoCancellation = !0, this.baseURL = e, this.lang = r, t ? this.authStore = t : typeof window < "u" && window.Deno ? this.authStore = new nr : this.authStore = new co, this.collections = new po(this), this.files = new _o(this), this.logs = new bo(this), this.settings = new uo(this), this.realtime = new ms(this), this.health = new go(this), this.backups = new mo(this), this.crons = new yo(this) } get admins() { return this.collection("_superusers") } createBatch() { return new Co(this) } collection(e) { return this.recordServices[e] || (this.recordServices[e] = new vo(this, e)), this.recordServices[e] } autoCancellation(e) { return this.enableAutoCancellation = !!e, this } cancelRequest(e) { return this.cancelControllers[e] && (this.cancelControllers[e].abort(), delete this.cancelControllers[e]), this } cancelAllRequests() { for (let e in this.cancelControllers) this.cancelControllers[e].abort(); return this.cancelControllers = {}, this } filter(e, t) { if (!t) return e; for (let r in t) { let s = t[r]; switch (typeof s) { case "boolean": case "number": s = "" + s; break; case "string": s = "'" + s.replace(/'/g, "\\'") + "'"; break; default: s = s === null ? "null" : s instanceof Date ? "'" + s.toISOString().replace("T", " ") + "'" : "'" + JSON.stringify(s).replace(/'/g, "\\'") + "'" }e = e.replaceAll("{:" + r + "}", s) } return e } getFileUrl(e, t, r = {}) { return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"), this.files.getURL(e, t, r) } buildUrl(e) { return console.warn("Please replace pb.buildUrl() with pb.buildURL()"), this.buildURL(e) } buildURL(e) { let t = this.baseURL; return typeof window > "u" || !window.location || t.startsWith("https://") || t.startsWith("http://") || (t = window.location.origin?.endsWith("/") ? window.location.origin.substring(0, window.location.origin.length - 1) : window.location.origin || "", this.baseURL.startsWith("/") || (t += window.location.pathname || "/", t += t.endsWith("/") ? "" : "/"), t += this.baseURL), e && (t += t.endsWith("/") ? "" : "/", t += e.startsWith("/") ? e.substring(1) : e), t } async send(e, t) { t = this.initSendOptions(e, t); let r = this.buildURL(e); if (this.beforeSend) { const s = Object.assign({}, await this.beforeSend(r, t)); s.url !== void 0 || s.options !== void 0 ? (r = s.url || r, t = s.options || t) : Object.keys(s).length && (t = s, console?.warn && console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.")) } if (t.query !== void 0) { const s = _s(t.query); s && (r += (r.includes("?") ? "&" : "?") + s), delete t.query } return this.getHeader(t.headers, "Content-Type") == "application/json" && t.body && typeof t.body != "string" && (t.body = JSON.stringify(t.body)), (t.fetch || fetch)(r, t).then(async s => { let i = {}; try { i = await s.json() } catch { } if (this.afterSend && (i = await this.afterSend(s, i, t)), s.status >= 400) throw new ce({ url: s.url, status: s.status, data: i }); return i }).catch(s => { throw new ce(s) }) } initSendOptions(e, t) { if ((t = Object.assign({ method: "GET" }, t)).body = function (s) { if (typeof FormData > "u" || s === void 0 || typeof s != "object" || s === null || Un(s) || !Er(s)) return s; const i = new FormData; for (const o in s) { const a = s[o]; if (a !== void 0) if (typeof a != "object" || Er({ data: a })) { const l = Array.isArray(a) ? a : [a]; for (let u of l) i.append(o, u) } else { let l = {}; l[o] = a, i.append("@jsonPayload", JSON.stringify(l)) } } return i }(t.body), rr(t), t.query = Object.assign({}, t.params, t.query), t.requestKey === void 0 && (t.$autoCancel === !1 || t.query.$autoCancel === !1 ? t.requestKey = null : (t.$cancelKey || t.query.$cancelKey) && (t.requestKey = t.$cancelKey || t.query.$cancelKey)), delete t.$autoCancel, delete t.query.$autoCancel, delete t.$cancelKey, delete t.query.$cancelKey, this.getHeader(t.headers, "Content-Type") !== null || Un(t.body) || (t.headers = Object.assign({}, t.headers, { "Content-Type": "application/json" })), this.getHeader(t.headers, "Accept-Language") === null && (t.headers = Object.assign({}, t.headers, { "Accept-Language": this.lang })), this.authStore.token && this.getHeader(t.headers, "Authorization") === null && (t.headers = Object.assign({}, t.headers, { Authorization: this.authStore.token })), this.enableAutoCancellation && t.requestKey !== null) { const r = t.requestKey || (t.method || "GET") + e; delete t.requestKey, this.cancelRequest(r); const s = new AbortController; this.cancelControllers[r] = s, t.signal = s.signal } return t } getHeader(e, t) { e = e || {}, t = t.toLowerCase(); for (let r in e) if (r.toLowerCase() == t) return e[r]; return null } } const N = Ie({ init: !1, mainColor: "c5a103", dotColor: "f8fBf8", backgroundColor: "1a1a1a", hoverColor: "947900", textColor: "f8f8f8", titleColor: "f8f8f8", inactiveColor: "252525", activeColor: "2f2f2f", blurRadius: "5", gap: "10", noteWidth: "500", initialized: !1, imageWidth: "500", experimental: !0, pocket: new ws("https://georgeeggers.xyz"), url: "https://georgeeggers.xyz" }); var Eo = (n, e, t) => { B(e, (c(e) + 1) % t.length) }, Oo = M(`<button id="enter" style="position: fixed; scale: 0;">Enter</button> <label for="enter"><div class="blocker svelte-zib0q4"><h1 class="svelte-zib0q4">Welcome to <i style="color: var(--main-color)" class="svelte-zib0q4">The Board</i></h1> <p1 class="svelte-zib0q4">Thanks for checking out <i style="color: var(--main-color)" class="svelte-zib0q4">The Board</i>! Every single person I talk to on <a href="https://ome.tv/" style="color: var(--main-color); cursor: pointer;">Ome.TV</a> has the chance to add one piece of media of their choice. If you're on PC, right click and drag to navigate. Click the button below to cycle through color schemes, or click anywhere else to exit this popup</p1> <button id="changeTheme" style="position: fixed; scale: 0;">Change Theme</button> <label class="themeButton svelte-zib0q4" for="changeTheme"><svg viewBox="0 0 1382 1382" style="width: max(2vw, 24px); height: auto;" class="svelte-zib0q4"><path fill="currentColor" d="M1080.5,320l-103-2c-19,0-34,6-46,19-13,13-19,28-19,46s6,34,19,47c12,13,28,19,47,18l270,5h7c18-1,33-8,45-21,11-12,17-27,17-45v-3l1-267c0-19-6-35-19-48-13-12-28-18-47-19-18,0-33,6-45,18s-19,29-19,48l-1,118c-60-72-133-129-219-171C879.5,21,787.5,0,692.5,0s-155,13-229,39c-75,26-142,63-201,112-62,50-112,109-151,178s-64,146-74,229l-2,8c-1,3-1,7-1,13,0,19,7,35,21,47,14,13,30,19,48,19s27-4,38-13c11-8,19-20,24-37,7-65,24-125,53-182s67-106,114-149c47-42,101-75,163-98,61-23,127-35,197-35s149,18,218,54c61,31,117,76,170,135ZM300.5,1062l104,2c19-1,34-7,47-20s18-27,18-46c-1-19-7-34-19-47-12-12-28-18-47-18l-262-4s-5-1-11-1c-18,1-33,7-46,19s-19,27-20,45v4l-1,269c-1,19,6,35,19,47,13,13,29,19,48,19s33-6,45-19,18-28,18-47v-116c60,72,133,129,220,170,88,42,180,63,275,63s154-13,229-40c75-26,142-63,202-112,61-49,112-109,151-178s64-146,74-229l1-8c1-7,2-11,2-14,0-19-7-34-21-47-15-12-31-18-49-18s-27,4-38,12c-11,9-19,22-24,39-7,67-25,129-54,186s-66,106-113,147-101,73-162,96-127,34-198,34-147-18-217-54c-61-31-118-76-171-134Z"></path></svg> </label></div></label>`, 1), ko = M(`<textarea class="title svelte-zib0q4" placeholder="Title">
      </textarea>`), xo = M('<p1 class="title svelte-zib0q4"> </p1>'), To = M('<textarea class="body svelte-zib0q4" placeholder="Content"></textarea>'), qo = M('<p1 class="body svelte-zib0q4"> </p1>'), Ro = M('<input type="file" style="visibility: hidden; position: fixed;" class="svelte-zib0q4"/>'), Po = M('<div class="imagePlaceholder svelte-zib0q4" style="flex-direction: row;"><svg class="bigSvg svelte-zib0q4" viewBox="0,0,1340,1340" fill="currentColor"><path d="M0,0M808,171 C808,171,1155,517,1155,517 C1168,530,1184,537,1201,537 C1218,537,1234,530,1247,517 C1260,504,1266,489,1266,471 C1266,454,1259,438,1246,425 C1246,425,790,-31,790,-31 C777,-44,761,-51,743,-51 C724,-51,708,-45,695,-32 C695,-32,690,-26,690,-26 C690,-26,249,421,249,421 C236,434,229,450,229,467 C229,485,236,501,249,514 C262,527,278,534,295,534 C312,534,328,527,341,514 C341,514,676,174,676,174 C676,174,676,941,676,941 C676,960,683,976,696,989 C709,1002,724,1008,742,1008 C761,1008,776,1002,789,989 C802,976,808,960,808,941 C808,941,808,171,808,171Z M1316,1156 C1316,1156,169,1156,169,1156 C150,1156,134,1162,121,1175 C108,1188,101,1204,101,1223 C101,1241,108,1256,121,1269 C134,1282,150,1289,169,1289 C169,1289,1316,1289,1316,1289 C1335,1289,1351,1282,1364,1269 C1377,1256,1383,1241,1383,1222 C1383,1204,1377,1188,1364,1175 C1351,1162,1335,1156,1316,1156Z " class="svelte-zib0q4"></path></svg></div>'), Io = M('<label class="imagePlaceholder hover svelte-zib0q4" style="flex-direction: row;">+</label>'), Lo = M('<label class="imagePlaceholder svelte-zib0q4"><img class="thumbnailImage svelte-zib0q4" alt="thumbnail" draggable="false"/></label>'), Ao = (n, e, t, r) => e(c(t).indexOf(c(r))), jo = (n, e, t, r) => e(c(t).indexOf(c(r))), No = (n, e, t, r) => e(c(t).indexOf(c(r))), zo = (n, e, t, r) => e(c(t).indexOf(c(r))), Uo = M('<label class="svelte-zib0q4"><svg fill="currentColor" class="bigSvg hover svelte-zib0q4" style="cursor: pointer" viewBox="0 0 1289 1289"><path d="M207,1228V65c-1-18,5-33,18-46S253,0,272,0s33,6,46,19c12,13,18,28,18,46l1,1163c0,17-6,32-19,43-13,12-28,18-46,18s-33-6-46-17-19-26-19-44ZM922,1228V65c0-18,6-33,19-46S969,0,988,0s33,6,46,19c12,13,18,28,18,46l1,1163c0,17-6,32-19,43-13,12-28,18-46,18s-34-6-47-17-19-26-19-44Z" class="svelte-zib0q4"></path></svg></label>'), Mo = M('<label class="svelte-zib0q4"><svg fill="currentColor" class="bigSvg hover svelte-zib0q4" style="cursor: pointer" viewBox="0 0 1289 1289"><path d="M7.5,1235V62c0-12,2-21,6-26,5-11,13-20,23-26C46.5,3,57.5,0,68.5,0s19,2,30,7l1150,574c12,5,22,13,29,24,7,10,10,22,10,35s-3,25-10,36-17,19-30,24L98.5,1290c-7,3-14,5-21,5-11,0-23-3-36-10-22-11-33-28-34-50ZM1079.5,643L121.5,161v972l958-490Z" class="svelte-zib0q4"></path></svg></label>'), Do = M('<label class="imagePlaceholder svelte-zib0q4"><audio class="svelte-zib0q4"><source class="svelte-zib0q4"/></audio> <button style="visibility: hidden; position: fixed;" class="svelte-zib0q4">Play</button> <button style="visibility: hidden; position: fixed;" class="svelte-zib0q4">Pause</button> <button style="visibility: hidden; position: fixed;" class="svelte-zib0q4">Back</button> <button style="visibility: hidden; position: fixed;" class="svelte-zib0q4">Forward</button> <label class="svelte-zib0q4"><svg fill="currentColor" class="mediumSvg hover svelte-zib0q4" style="cursor: pointer;" viewBox="0 0 1301 1301"><path d="M1125.5,650c0-71-13-138-40-201s-64-119-112-167-104-85-167-112c-63-26-130-39-201-39-134,0-250,49-347,146h127c18,0,33,6,46,19s19,28,19,45-6,34-19,47-28,20-46,19H109.5c-18,0-33-6-46-19s-19-28-19-46V72c0-19,6-34,19-47,13-12,28-18,46-18s33,6,46,18c13,13,19,28,19,47v104C295.5,59,439.5,0,604.5,0s173,17,252,50,149,80,209,140,107,129,141,208c33,79,50,163,50,252s-29,227-88,328c-28,49-62,93-101,132-39,40-83,74-131,102-49,29-101,51-156,66s-112,23-171,23c-87,0-169-16-248-48-79-31-151-79-215-143s-19-28-19-46,7-34,20-46c13-11,28-17,46-17s33,6,46,19c102,100,225,150,370,150s140-14,203-42c63-27,119-65,166-114,47-48,83-104,109-167,25-63,38-128,38-197Z" class="svelte-zib0q4"></path></svg></label> <!> <label class="svelte-zib0q4"><svg fill="currentColor" class="mediumSvg hover svelte-zib0q4" style="cursor: pointer;" viewBox="0 0 1301 1301"><path d="M174.9,650c0-71,13-138,40-201,27-63,64.1-119,112.1-167,48.1-48,104.1-85,167.2-112,63.1-26,130.2-39,201.2-39,134.2,0,250.3,49,347.4,146h-127.2c-18,0-33,6-46.1,19s-19,28-19,45,6,34,19,47,28,20,46.1,19h276.3c18,0,33-6,46.1-19s19-28,19-46V72c0-19-6-34-19-47-13-12-28-18-46.1-18s-33,6-46.1,18c-13,13-19,28-19,47v104C1005.9,59,861.8,0,696.6,0s-173.2,17-252.3,50-149.2,80-209.3,140c-60.1,60-107.1,129-141.2,208-33,79-50.1,163-50.1,252s29,227,88.1,328c28,49,62.1,93,101.1,132,39,40,83.1,74,131.2,102,49.1,29,101.1,51,156.2,66s112.1,23,171.2,23c87.1,0,169.2-16,248.3-48,79.1-31,151.2-79,215.3-143s19-28,19-46-7-34-20-46c-13-11-28-17-46.1-17s-33,6-46.1,19c-102.1,100-225.3,150-370.5,150s-140.2-14-203.2-42c-63.1-27-119.1-65-166.2-114-47.1-48-83.1-104-109.1-167-25-63-38-128-38-197Z" class="svelte-zib0q4"></path></svg></label> <div class="playbarContainer svelte-zib0q4"><div class="playbar svelte-zib0q4"></div></div></label> <p1 class="body svelte-zib0q4"> </p1>', 1), Bo = M('<label class="imagePlaceholder svelte-zib0q4"><svg class="bigSvg svelte-zib0q4" viewBox="0 0 1461 1461" fill="currentColor"><path d="M187,65v1332c0,19,7,35,22,48l8,6,3,2c8,4,17,7,26,8h1061c17-1,32-8,44-21,11-12,17-26,17-43v-884c0-17-6-32-18-45-4-5-8-9-13-13L904,27c-9-9-19-17-30-22-4-1-7-2-7-2l-12-3H251c-18,0-33,6-45,18s-19,28-19,47ZM799,553c9,11,20,19,33,23l12,2h394v753l-921,1V129l468,1v384c0,15,5,28,14,39ZM920,228l217,215h-217v-215Z" class="svelte-zib0q4"></path></svg></label> <p1 class="body svelte-zib0q4"> </p1>', 1), Fo = M("<!> <!>", 1), $o = M('<textarea class="body svelte-zib0q4"></textarea> <button class="inlineButton hover svelte-zib0q4"><svg class="inlineSvg svelte-zib0q4" fill="currentColor" viewBox="0 0 1302 1302"><path d="M822.5,22C766.5,7,708.5,0,649.5,0s-117,7-172,22c-56,15-108,37-157,66-48,29-92,63-131,102-39,40-73,84-101,132C29.5,423,.5,533,.5,651s29,227,88,328c28,49,62,93,101,132,39,40,83,74,131,102,49,29,101,51,157,66s113,23,172,23,116-8,172-23,108-37,157-66c48-28,92-62,132-102s74-84,102-132c59-102,89-211,89-328s-30-226-89-329c-28-48-62-92-102-132-40-39-84-73-132-102-49-29-101-51-156-66ZM448.5,171c63-26,131-39,202-39s116,9,171,28,104,46,149,81L243.5,968l-3,4c-35-45-62-94-81-149-19-54-28-111-28-172s13-138,40-201,64-119,111-167,103-85,166-112ZM333.5,1064l729-729c35,45,61,94,80,147,19,54,28,110,28,169s-13,138-40,201-64,119-112,167-104,85-167,112-130,40-201,40-116-9-169-28c-54-18-103-44-148-79Z" class="svelte-zib0q4"></path></svg></button> <button class="inlineButton hover svelte-zib0q4"><svg class="inlineSvg svelte-zib0q4" fill="currentColor" viewBox="0 0 1293 1293"><path d="M708,581.5V66.5c0-19-6-34-19-47S660,.5,642,.5s-34,6-47,19-20,29-20,47v515H66c-19,0-34,7-47,20S0,630.5,0,649.5s7,32,20,45,28,20,46,20h509v512c0,19,7,34,20,47s28,19,47,19,34-7,47-20,19-28,19-46v-512h518c19,0,35-6,48-19s19-28,19-46-6-35-19-48-29-20-48-20h-518Z" class="svelte-zib0q4"></path></svg></button>', 1), Wo = M('<p1 class="body svelte-zib0q4"> </p1>'), Ko = M('<span class="inline svelte-zib0q4"><button class="toggleTodo svelte-zib0q4">Toggle</button> <div class="todoBorder svelte-zib0q4"><label class="todoButton svelte-zib0q4"></label></div> <!></span>'), Ho = M('<textarea class="body svelte-zib0q4"></textarea> <button class="inlineButton hover svelte-zib0q4"><svg class="inlineSvg svelte-zib0q4" fill="currentColor" viewBox="0 0 1302 1302"><path d="M822.5,22C766.5,7,708.5,0,649.5,0s-117,7-172,22c-56,15-108,37-157,66-48,29-92,63-131,102-39,40-73,84-101,132C29.5,423,.5,533,.5,651s29,227,88,328c28,49,62,93,101,132,39,40,83,74,131,102,49,29,101,51,157,66s113,23,172,23,116-8,172-23,108-37,157-66c48-28,92-62,132-102s74-84,102-132c59-102,89-211,89-328s-30-226-89-329c-28-48-62-92-102-132-40-39-84-73-132-102-49-29-101-51-156-66ZM448.5,171c63-26,131-39,202-39s116,9,171,28,104,46,149,81L243.5,968l-3,4c-35-45-62-94-81-149-19-54-28-111-28-172s13-138,40-201,64-119,111-167,103-85,166-112ZM333.5,1064l729-729c35,45,61,94,80,147,19,54,28,110,28,169s-13,138-40,201-64,119-112,167-104,85-167,112-130,40-201,40-116-9-169-28c-54-18-103-44-148-79Z" class="svelte-zib0q4"></path></svg></button> <button class="inlineButton hover svelte-zib0q4"><svg class="inlineSvg svelte-zib0q4" fill="currentColor" viewBox="0 0 1293 1293"><path d="M708,581.5V66.5c0-19-6-34-19-47S660,.5,642,.5s-34,6-47,19-20,29-20,47v515H66c-19,0-34,7-47,20S0,630.5,0,649.5s7,32,20,45,28,20,46,20h509v512c0,19,7,34,20,47s28,19,47,19,34-7,47-20,19-28,19-46v-512h518c19,0,35-6,48-19s19-28,19-46-6-35-19-48-29-20-48-20h-518Z" class="svelte-zib0q4"></path></svg></button>', 1), Vo = M('<p1 class="body svelte-zib0q4"> </p1>'), Zo = M('<textarea class="body svelte-zib0q4"></textarea> <button class="inlineButton hover svelte-zib0q4"><svg class="inlineSvg svelte-zib0q4" fill="currentColor" viewBox="0 0 1302 1302"><path d="M822.5,22C766.5,7,708.5,0,649.5,0s-117,7-172,22c-56,15-108,37-157,66-48,29-92,63-131,102-39,40-73,84-101,132C29.5,423,.5,533,.5,651s29,227,88,328c28,49,62,93,101,132,39,40,83,74,131,102,49,29,101,51,157,66s113,23,172,23,116-8,172-23,108-37,157-66c48-28,92-62,132-102s74-84,102-132c59-102,89-211,89-328s-30-226-89-329c-28-48-62-92-102-132-40-39-84-73-132-102-49-29-101-51-156-66ZM448.5,171c63-26,131-39,202-39s116,9,171,28,104,46,149,81L243.5,968l-3,4c-35-45-62-94-81-149-19-54-28-111-28-172s13-138,40-201,64-119,111-167,103-85,166-112ZM333.5,1064l729-729c35,45,61,94,80,147,19,54,28,110,28,169s-13,138-40,201-64,119-112,167-104,85-167,112-130,40-201,40-116-9-169-28c-54-18-103-44-148-79Z" class="svelte-zib0q4"></path></svg></button>', 1), Go = M('<p1 class="body svelte-zib0q4"> </p1>'), Yo = M('<span class="inline svelte-zib0q4"><p1 class="body svelte-zib0q4"></p1> <button class="toggleTodo svelte-zib0q4">Toggle</button> <div class="todoBorder svelte-zib0q4"><label class="todoButton svelte-zib0q4"></label></div> <!></span>'), Jo = M('<span class="inline svelte-zib0q4"><div class="todoBorder svelte-zib0q4"><label class="todoButton svelte-zib0q4"></label></div> <!></span> <!>', 1), Qo = async (n, e) => { c(e).todo.items.push(""), c(e).todo.values.push(!1) }, Xo = M('<button class="inlineButton hover svelte-zib0q4"><svg class="inlineSvg svelte-zib0q4" fill="currentColor" viewBox="0 0 1293 1293"><path d="M708,581.5V66.5c0-19-6-34-19-47S660,.5,642,.5s-34,6-47,19-20,29-20,47v515H66c-19,0-34,7-47,20S0,630.5,0,649.5s7,32,20,45,28,20,46,20h509v512c0,19,7,34,20,47s28,19,47,19,34-7,47-20,19-28,19-46v-512h518c19,0,35-6,48-19s19-28,19-46-6-35-19-48-29-20-48-20h-518Z" class="svelte-zib0q4"></path></svg></button>'), ea = M("<!> <!>", 1), ta = M("<div><!> <!></div>"), na = M('<div class="viewport svelte-zib0q4"><!> <!></div>'); function ra(n, e) {
  Hn(e, !0); let t = _e(Ie([])), r = _e(-1); Bt(() => { const b = { "--main-color": N.mainColor, "--dot-color": N.dotColor, "--bg-color": N.backgroundColor, "--hover-color": N.hoverColor, "--text-color": N.textColor, "--title-color": N.titleColor, "--inactive-color": N.inactiveColor, "--note-color": N.activeColor }; for (const [f, T] of Object.entries(b)) document.documentElement.style.setProperty(f, `#${T}`); document.documentElement.style.setProperty("--blur-radius", `${N.blurRadius}px`) }); let s = Ie([{ name: "Default", backgroundColor: "1a1a1a", activeColor: "2f2f2f", inactiveColor: "252525", mainColor: "c5a103", hoverColor: "947900", textColor: "f8f8f8", titleColor: "f8f8f8", dotColor: "f8f8f8", blurRadius: "0" }, { name: "Cyber", backgroundColor: "080808e0", activeColor: "151515", inactiveColor: "10101088", mainColor: "007f77", hoverColor: "006e55", textColor: "009f77", titleColor: "009f77", dotColor: "009f77", blurRadius: "7" }, { name: "Light", backgroundColor: "f8f8f8", activeColor: "c8c8c8", inactiveColor: "e8e8e8", mainColor: "c5a103", hoverColor: "947900", textColor: "1a1a1a", titleColor: "1a1a1a", dotColor: "000000", blurRadius: "0" }, { name: "Midnight", backgroundColor: "000000", activeColor: "1a1a1a", inactiveColor: "121212", mainColor: "f8f8f8", hoverColor: "f8f8f8", textColor: "ffffff", titleColor: "ffffff", dotColor: "000000", blurRadius: "0" }, { name: "Mocha", backgroundColor: "1e1e2e", activeColor: "45475a", inactiveColor: "313244", mainColor: "ed8796", hoverColor: "ee99a0", textColor: "cdd6f4", titleColor: "b4befe", dotColor: "b4befe", blurRadius: "0" }]); const i = async b => { N.hoverColor = b.hoverColor, N.textColor = b.textColor, N.titleColor = b.titleColor, N.inactiveColor = b.inactiveColor, N.activeColor = b.activeColor, N.backgroundColor = b.backgroundColor, N.dotColor = b.dotColor, N.mainColor = b.mainColor, N.blurRadius = b.blurRadius }; let o = _e(0), a = ui(() => s[c(o)]); Bt(() => { i(c(a)) }); let l = async b => { b.button == 0 && B(r, parseInt(b.currentTarget.id), !0) }; const u = b => { c(d) && window.scrollBy(b.movementX * -1, b.movementY * -1) }, v = b => { b.button == 2 && (b.preventDefault(), B(d, !0), document.addEventListener("mousemove", u)) }, g = b => { b.button == 2 && (B(d, !1), document.removeEventListener("mousemove", u)) }; let d = _e(!1); vs(async () => { try { const f = await N.pocket.collection("notes").getFullList({ sort: "-created" }); B(t, f, !0); for (let T of c(t)) T.editing = !1; await y(3e3), S() } catch { _("Failed to connect to note server") } let b = document.getElementsByClassName("note"); for (let f of b) f.addEventListener("mousedown", l); N.init || (document.addEventListener("mousedown", v), document.addEventListener("mouseup", g), document.addEventListener("contextmenu", f => { f.preventDefault() }), N.init = !0) }); const p = b => { for (let f of ["jpg", "jpeg", "png", "gif", "bmp", "tiff", "tif", "webp", "heif", "heic", "ico", "avif", "psd", "ai", "eps", "raw", "cr2", "nef"]) if (f == b) return "image"; for (let f of ["wav", "mp3", "ogg"]) if (f == b) return "audio"; return "other" }, h = b => { let f = c(t)[b].image.split(".").reverse()[0]; return { type: p(f.toLowerCase()), data: N.pocket.files.getURL(c(t)[b], c(t)[b].image) } }, _ = async b => {
    let f = document.getElementById("notifArea"), T = document.createElement("div"); T.style.cssText = `
      opacity: 0.0;
      transform: translateY(32px);
      transition: 
        opacity 500ms,
        transform 500ms
      ;
      background-color: var(--main-color);
      padding-left: 10px;
      padding-right: 10px;
      border-radius: 10px;
      width: fit-content;
      height: fit-content;
      box-sizing: border-box;
    `; let E = document.createElement("p1"); E.style.cssText = `
      color: var(--text-color);      
    `, E.innerText = b, await T.appendChild(E), await f.appendChild(T), setTimeout(() => { T.style.opacity = "1.0", T.style.transform = "translateY(0px)" }, 250), setTimeout(() => { T.style.opacity = "0.0", T.style.transform = "translateY(-32px)" }, 3500), setTimeout(() => { T.remove() }, 4e3)
  }, R = b => { for (let f of b) if (!f) return !1; return !0 }; function y(b) { return new Promise(f => setTimeout(f, b)) } const O = async b => { }; let m = 0; const F = (b, f) => { let T = 0; for (let E of f) b >= E.low && b <= E.high && E.output > T && (T = E.output); return T }, S = async () => { m = 0; let b = document.getElementsByClassName("note"), f = 0, T = 0, E = []; for (let C of b) C.classList[1].toString() != "settingsType" && C.classList[1].toString() != "styleType" && (E.push({ area: C.offsetWidth * C.offsetHeight, width: C.offsetWidth, height: C.offsetHeight, id: C.id, flatness: C.offsetWidth / C.offsetHeight, x: 0, y: 0 }), f += C.offsetWidth, T += C.offsetHeight); let Je = Math.round(1500 / E.length / 2); E.sort((C, P) => C.flatness < P.flatness ? 1 : C.flatness > P.flatness || C.height < P.height ? -1 : C.height > P.height ? 1 : 0); let gt = f / Math.ceil(Math.sqrt(E.length)) * 1.5, Qe = 0; const te = parseInt(N.gap); let Me = te, _t = te, Z = 0, Y = [], we = [], De = []; for (let C of [...E]) { Qe += te + C.width; let P = parseInt(C.id); c(t)[P].y = _t, c(t)[P].x = Me, E[E.indexOf(C)].x = Me, E[E.indexOf(C)].y = _t, B(r, P, !0), Z == 0 && (E.splice(E.indexOf(C), 1), Y.push({ low: Me, high: C.width + Me + te, output: _t + C.height + te })), Me += te + C.width, C.height > m && (m = C.height), await y(Je), De.push(C), Qe >= gt && (Qe = 0, _t += m + te, Me = te, m = 0, Z++, we.push(De), De = []) } we.push(De); let Be = []; for (let C = 0; C < Z; C++) { for (let P of we[C + 1]) { let fe = F(P.x, Y), Xe = F(P.x + P.width, Y), Fe = parseInt(P.id); fe > Xe ? (c(t)[Fe].y = fe, Be.push({ low: P.x, high: P.width + P.x + te, output: fe + P.height + te })) : (c(t)[Fe].y = Xe, Be.push({ low: P.x, high: P.width + P.x + te, output: Xe + P.height + te })), await y(Je) } for (let P of Be) Y.push(P); Be = [] } }, w = (b, f, T) => { f.style.setProperty("width", `${Math.floor(T.currentTime / T.duration * 100)}%`) }, k = b => { const f = document.getElementById(`b${b}`), T = document.getElementById(`a${b}`); T.addEventListener("ended", E => D(E)), T.removeEventListener("play", E => A(b)), T.addEventListener("pause", E => V(b)), T.addEventListener("timeupdate", E => { w(E, f, T) }) }, D = b => { const f = document.getElementById(`b${b}`), T = document.getElementById(`a${b}`); T.removeEventListener("ended", E => D(E)), T.addEventListener("play", E => A(b)), T.removeEventListener("pause", E => V(b)), T.removeEventListener("timeupdate", E => { w(E, f, T) }) }, A = async b => { const f = document.getElementById(`a${b}`); await k(b), c(t)[b].playing = !0, f.play() }, V = async b => { const f = document.getElementById(`a${b}`); await D(b), c(t)[b].playing = !1, f.pause() }, Rt = b => { const f = document.getElementById(`a${b}`); f.currentTime -= 15 }, Pt = b => { const f = document.getElementById(`a${b}`); f.currentTime += 15 }; var Zt = na(), Gt = W(Zt); { var wn = b => { var f = Oo(), T = G(f); T.__click = () => { N.initialized = !0 }; var E = j(T, 2), Je = W(E), gt = j(W(Je), 4); gt.__click = [Eo, o, s]; var Qe = j(gt, 2), te = j(W(Qe)); Q(() => He(te, ` ${c(a).name ?? ""}`)), q(b, f) }; J(Gt, b => { N.initialized || b(wn) }) } var Cs = j(Gt, 2); En(Cs, 17, () => c(t), b => b.id, (b, f, T) => { var E = ta(), Je = W(E); { var gt = Z => { var Y = ko(); Nt(Y, () => c(f).title, we => c(f).title = we), q(Z, Y) }, Qe = Z => { var Y = xo(), we = W(Y); Q(() => He(we, c(f).title)), q(Z, Y) }; J(Je, Z => { c(f).editing ? Z(gt) : Z(Qe, !1) }) } var te = j(Je, 2); { var Me = Z => { var Y = ke(), we = G(Y); { var De = C => { var P = To(); Nt(P, () => c(f).content, fe => c(f).content = fe), q(C, P) }, Be = C => { var P = qo(), fe = W(P); Q(() => He(fe, c(f).content)), q(C, P) }; J(we, C => { c(f).editing ? C(De) : C(Be, !1) }) } q(Z, Y) }, _t = Z => { var Y = ke(), we = G(Y); { var De = C => { var P = Fo(), fe = G(P); { var Xe = de => { var Ee = Ro(); Q(() => $(Ee, "id", `uploadTrigger${c(f).id ?? ""}`)), q(de, Ee) }; J(fe, de => { c(f).editing && de(Xe) }) } var Fe = j(fe, 2); { var Yt = de => { var Ee = ke(), qe = G(Ee); { var et = ne => { var re = Po(); q(ne, re) }, x = ne => { var re = Io(); Q(() => $(re, "for", `uploadTrigger${c(f).id ?? ""}`)), tn("dragover", re, tt => tt.preventDefault()), q(ne, re) }; J(qe, ne => { c(f).uploading ? ne(et) : ne(x, !1) }) } q(de, Ee) }, Jt = de => { var Ee = ke(), qe = G(Ee); { var et = ne => { var re = Lo(), tt = W(re); Q(nt => { $(re, "for", `uploadTrigger${c(f).id ?? ""}`), $(tt, "src", nt) }, [() => h(c(t).indexOf(c(f))).data]), tn("dragover", re, nt => nt.preventDefault()), q(ne, re) }, x = ne => { var re = ke(), tt = G(re); { var nt = he => { var ve = Do(), oe = G(ve), Ce = W(oe), rt = W(Ce), Re = j(Ce, 2); Re.__click = [Ao, A, t, f]; var st = j(Re, 2); st.__click = [jo, V, t, f]; var pe = j(st, 2); pe.__click = [No, Rt, t, f]; var H = j(pe, 2); H.__click = [zo, Pt, t, f]; var ae = j(H, 2), K = j(ae, 2); { var it = be => { var Pe = Uo(); Q(() => $(Pe, "for", `pause${c(f).id ?? ""}`)), q(be, Pe) }, We = be => { var Pe = Mo(); Q(() => $(Pe, "for", `play${c(f).id ?? ""}`)), q(be, Pe) }; J(K, be => { c(f).playing ? be(it) : be(We, !1) }) } var ot = j(K, 2), It = j(ot, 2), Qt = W(It), Xt = j(oe, 2), Cn = W(Xt); Q((be, Pe, Ke) => { $(oe, "for", `uploadTrigger${c(f).id ?? ""}`), $(Ce, "id", `a${be ?? ""}`), $(rt, "src", Pe), $(Re, "id", `play${c(f).id ?? ""}`), $(st, "id", `pause${c(f).id ?? ""}`), $(pe, "id", `back${c(f).id ?? ""}`), $(H, "id", `forward${c(f).id ?? ""}`), $(ae, "for", `back${c(f).id ?? ""}`), $(ot, "for", `forward${c(f).id ?? ""}`), $(Qt, "id", `b${Ke ?? ""}`), He(Cn, c(f).image) }, [() => c(t).indexOf(c(f)), () => h(c(t).indexOf(c(f))).data, () => c(t).indexOf(c(f))]), tn("dragover", oe, be => be.preventDefault()), q(he, ve) }, $e = he => { var ve = Bo(), oe = G(ve), Ce = j(oe, 2), rt = W(Ce); Q(() => { $(oe, "for", `uploadTrigger${c(f).id ?? ""}`), He(rt, c(f).image) }), tn("dragover", oe, Re => Re.preventDefault()), q(he, ve) }; J(tt, he => { h(c(t).indexOf(c(f))).type == "audio" && N.experimental ? he(nt) : he($e, !1) }, !0) } q(ne, re) }; J(qe, ne => { h(c(t).indexOf(c(f))).type == "image" ? ne(et) : ne(x, !1) }) } q(de, Ee) }; J(Fe, de => { c(f).image == "" ? de(Yt) : de(Jt, !1) }) } q(C, P) }, Be = C => { var P = ke(), fe = G(P); { var Xe = Fe => { var Yt = ea(), Jt = G(Yt); En(Jt, 17, () => c(f).todo.items, pr, (qe, et, x) => { var ne = ke(), re = G(ne); { var tt = $e => { var he = Ko(), ve = W(he); ve.__click = () => { c(f).todo.values[x] = !c(f).todo.values[x], O() }; var oe = j(ve, 2), Ce = W(oe), rt = j(oe, 2); { var Re = pe => { var H = $o(), ae = G(H), K = j(ae, 2); K.__click = () => { c(f).todo.items.splice(x, 1), c(f).todo.values.splice(x, 1) }; var it = j(K, 2); it.__click = () => { c(f).todo.values[x] = { items: [""], values: [!1] } }, Nt(ae, () => c(f).todo.items[x], We => c(f).todo.items[x] = We), q(pe, H) }, st = pe => { var H = Wo(), ae = W(H); Q(() => He(ae, c(f).todo.items[x])), q(pe, H) }; J(rt, pe => { c(f).editing ? pe(Re) : pe(st, !1) }) } Q(() => { $(ve, "id", `${c(f).id ?? ""}choice${x}`), $(Ce, "for", `${c(f).id ?? ""}choice${x}`), nn(Ce, c(f).todo.values[x] ? "background-color: var(--main-color)" : "") }), q($e, he) }, nt = $e => { var he = Jo(), ve = G(he), oe = W(ve), Ce = W(oe), rt = j(oe, 2); { var Re = H => { var ae = Ho(), K = G(ae), it = j(K, 2); it.__click = () => { c(f).todo.items.splice(x, 1), c(f).todo.values.splice(x, 1) }; var We = j(it, 2); We.__click = async () => { c(f).todo.values[x].items.push(""), c(f).todo.values[x].values.push(!1) }, Nt(K, () => c(f).todo.items[x], ot => c(f).todo.items[x] = ot), q(H, ae) }, st = H => { var ae = Vo(), K = W(ae); Q(() => He(K, c(f).todo.items[x])), q(H, ae) }; J(rt, H => { c(f).editing ? H(Re) : H(st, !1) }) } var pe = j(ve, 2); En(pe, 17, () => c(f).todo.values[x].items, pr, (H, ae, K, it) => { var We = Yo(), ot = W(We); ot.textContent = " "; var It = j(ot, 2); It.__click = () => { c(f).todo.values[x].values[K] = !c(f).todo.values[x].values[K], O() }; var Qt = j(It, 2), Xt = W(Qt), Cn = j(Qt, 2); { var be = Ke => { var Lt = Zo(), en = G(Lt), Ss = j(en, 2); Ss.__click = () => { c(f).todo.values[x].items.splice(K, 1), c(f).todo.values[x].values.splice(K, 1), c(f).todo.values[x].items.length == 0 && (c(f).todo.values[x] = !1) }, Nt(en, () => c(f).todo.values[x].items[K], Es => c(f).todo.values[x].items[K] = Es), q(Ke, Lt) }, Pe = Ke => { var Lt = Go(), en = W(Lt); Q(() => He(en, c(f).todo.values[x].items[K])), q(Ke, Lt) }; J(Cn, Ke => { c(f).editing ? Ke(be) : Ke(Pe, !1) }) } Q(() => { $(It, "id", `${c(f).id ?? ""}choice${x}sub${K}`), $(Xt, "for", `${c(f).id ?? ""}choice${x}sub${K}`), nn(Xt, c(f).todo.values[x].values[K] ? "background-color: var(--main-color)" : "") }), q(H, We) }), Q(H => { $(Ce, "for", `${c(f).id ?? ""}choice${x}`), nn(Ce, H) }, [() => R(c(f).todo.values[x].values) ? "background-color: var(--main-color)" : ""]), q($e, he) }; J(re, $e => { typeof c(f).todo.values[x] == "boolean" ? $e(tt) : $e(nt, !1) }) } q(qe, ne) }); var de = j(Jt, 2); { var Ee = qe => { var et = Xo(); et.__click = [Qo, f], q(qe, et) }; J(de, qe => { c(f).editing && qe(Ee) }) } q(Fe, Yt) }; J(fe, Fe => { c(f).type == "list" && Fe(Xe) }, !0) } q(C, P) }; J(we, C => { c(f).type == "image" ? C(De) : C(Be, !1) }, !0) } q(Z, Y) }; J(te, Z => { c(f).type == "note" ? Z(Me) : Z(_t, !1) }) } Q((Z, Y) => { Ki(E, 1, `note ${c(f).type ?? ""}Type`, "svelte-zib0q4"), $(E, "id", Z), nn(E, `left: ${c(f).x ?? ""}px; top: ${c(f).y ?? ""}px; ${Y ?? ""} max-width: ${(c(f).type == "image" ? N.imageWidth : c(f).type == "note" ? N.noteWidth : "1000000") ?? ""}px;`) }, [() => c(t).indexOf(c(f)).toString(), () => c(r) == c(t).indexOf(c(f)) ? "background-color: var(--note-color); z-index: 2;" : ""]), q(b, E) }), q(n, Zt), Vn()
} Ni(["click"]); const sa = { "/": ra }; function ia(n, e) { if (n instanceof RegExp) return { keys: !1, pattern: n }; var t, r, s, i, o = [], a = "", l = n.split("/"); for (l[0] || l.shift(); s = l.shift();)t = s[0], t === "*" ? (o.push("wild"), a += "/(.*)") : t === ":" ? (r = s.indexOf("?", 1), i = s.indexOf(".", 1), o.push(s.substring(1, ~r ? r : ~i ? i : s.length)), a += ~r && !~i ? "(?:/([^/]+?))?" : "/([^/]+?)", ~i && (a += (~r ? "?" : "") + "\\" + s.substring(i))) : a += "/" + s; return { keys: o, pattern: new RegExp("^" + a + "/?$", "i") } } function kr() { const n = window.location.href.indexOf("#/"); let e = n > -1 ? window.location.href.substr(n + 1) : "/"; const t = e.indexOf("?"); let r = ""; return t > -1 && (r = e.substr(t + 1), e = e.substr(0, t)), { location: e, querystring: r } } const sr = fs(null, function (e) { e(kr()); const t = () => { e(kr()) }; return window.addEventListener("hashchange", t, !1), function () { window.removeEventListener("hashchange", t, !1) } }); hs(sr, n => n.location); hs(sr, n => n.querystring); const xr = ds(void 0); function oa(n) { n ? window.scrollTo(n.__svelte_spa_router_scrollX, n.__svelte_spa_router_scrollY) : window.scrollTo(0, 0) } function aa(n, e) { Hn(e, !1); let t = Tn(e, "routes", 24, () => ({})), r = Tn(e, "prefix", 8, ""), s = Tn(e, "restoreScrollState", 8, !1); class i { constructor(w, k) { if (!k || typeof k != "function" && (typeof k != "object" || k._sveltesparouter !== !0)) throw Error("Invalid component object"); if (!w || typeof w == "string" && (w.length < 1 || w.charAt(0) != "/" && w.charAt(0) != "*") || typeof w == "object" && !(w instanceof RegExp)) throw Error('Invalid value for "path" argument - strings must start with / or *'); const { pattern: D, keys: A } = ia(w); this.path = w, typeof k == "object" && k._sveltesparouter === !0 ? (this.component = k.component, this.conditions = k.conditions || [], this.userData = k.userData, this.props = k.props || {}) : (this.component = () => Promise.resolve(k), this.conditions = [], this.props = {}), this._pattern = D, this._keys = A } match(w) { if (r()) { if (typeof r() == "string") if (w.startsWith(r())) w = w.substr(r().length) || "/"; else return null; else if (r() instanceof RegExp) { const V = w.match(r()); if (V && V[0]) w = w.substr(V[0].length) || "/"; else return null } } const k = this._pattern.exec(w); if (k === null) return null; if (this._keys === !1) return k; const D = {}; let A = 0; for (; A < this._keys.length;) { try { D[this._keys[A]] = decodeURIComponent(k[A + 1] || "") || null } catch { D[this._keys[A]] = null } A++ } return D } async checkConditions(w) { for (let k = 0; k < this.conditions.length; k++)if (!await this.conditions[k](w)) return !1; return !0 } } const o = []; t() instanceof Map ? t().forEach((S, w) => { o.push(new i(w, S)) }) : Object.keys(t()).forEach(S => { o.push(new i(S, t()[S])) }); let a = ln(null), l = ln(null), u = ln({}); const v = no(); async function g(S, w) { await qi(), v(S, w) } let d = null, p = null; s() && (p = S => { S.state && (S.state.__svelte_spa_router_scrollY || S.state.__svelte_spa_router_scrollX) ? d = S.state : d = null }, window.addEventListener("popstate", p), ro(() => { oa(d) })); let h = null, _ = null; const R = sr.subscribe(async S => { h = S; let w = 0; for (; w < o.length;) { const k = o[w].match(S.location); if (!k) { w++; continue } const D = { route: o[w].path, location: S.location, querystring: S.querystring, userData: o[w].userData, params: k && typeof k == "object" && Object.keys(k).length ? k : null }; if (!await o[w].checkConditions(D)) { B(a, null), _ = null, g("conditionsFailed", D); return } g("routeLoading", Object.assign({}, D)); const A = o[w].component; if (_ != A) { A.loading ? (B(a, A.loading), _ = A, B(l, A.loadingParams), B(u, {}), g("routeLoaded", Object.assign({}, D, { component: c(a), name: c(a).name, params: c(l) }))) : (B(a, null), _ = null); const V = await A(); if (S != h) return; B(a, V && V.default || V), _ = A } k && typeof k == "object" && Object.keys(k).length ? B(l, k) : B(l, null), B(u, o[w].props), g("routeLoaded", Object.assign({}, D, { component: c(a), name: c(a).name, params: c(l) })).then(() => { xr.set(c(l)) }); return } B(a, null), _ = null, xr.set(void 0) }); eo(() => { R(), p && window.removeEventListener("popstate", p) }), Ci(() => os(s()), () => { history.scrollRestoration = s() ? "manual" : "auto" }), Si(), Yi(); var y = ke(), O = G(y); { var m = S => { var w = ke(), k = G(w); br(k, () => c(a), (D, A) => { A(D, yr({ get params() { return c(l) } }, () => c(u), { $$events: { routeEvent(V) { mr.call(this, e, V) } } })) }), q(S, w) }, F = S => { var w = ke(), k = G(w); br(k, () => c(a), (D, A) => { A(D, yr(() => c(u), { $$events: { routeEvent(V) { mr.call(this, e, V) } } })) }), q(S, w) }; J(O, S => { c(l) ? S(m) : S(F, !1) }) } q(n, y), Vn() } function la(n) { aa(n, { get routes() { return sa } }) } Ui(la, { target: document.getElementById("app") });
